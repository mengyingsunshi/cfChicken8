var schedule_provinceANDcity;if(function(e){var t;t=function(){var D,O=function(){return k.moment().startOf("day").yearDay()},k=function(t,e){if("function"==typeof document.addEventListener||M.isIE8()){var n=!1;try{n=t instanceof Element}catch(e){n=!!t&&1===n.nodeType}n||"string"==typeof t||(e=t);var a,i,s,o,r,l,u,d,c=this,h=c.classes,f=c.settings=M.merge(c.defaults,{attachTo:t},e||{}),m=c.container=M.make("div",{class:h.container}),p=c.calendars=[],g=D().day(f.weekStart),b=[],y=[],v=0,_=f.months;for(M.isIE8()&&M.addClassName(m,"ie8"),v=7;v--;)b.push(g.format(f.columnHeaderFormat)),g.add(1,"days");if(T(c),"object"==typeof f.subscribe)for(v in f.subscribe)f.subscribe.hasOwnProperty(v)&&c.subscribe(v,f.subscribe[v]);a=f.viewStartDate?D(f.viewStartDate,f.format):D(),c.viewStartDate=a.date(1),c._sel=[],f.selected&&(c.setSelected(f.selected,!1),c.viewStartDate=D(c._sel[0]));var S={past:f.months-1,"today-past":f.months-1,any:2<f.months?Math.floor(f.months/2):0,"today-future":0,future:0}[this.settings.direction];if(S&&D().month()==D(c.viewStartDate).month()&&(c.viewStartDate=D(c.viewStartDate).subtract({M:S}).date(1)),c.defaultView=D(c.viewStartDate),"function"==typeof f.blackout)c.blackout=f.blackout;else if(f.blackout){var x=w(f.blackout,f.parseSplitDelimiter,f.format);c.blackout=function(e){if((e=D(e).startOf("day").yearDay())<1||!c._sel)return!1;for(var t=x.length;t--;)if(x[t].startOf("day").yearDay()===e)return!0;return!1}}else c.blackout=function(){return!1};for(c.direction=c.directions[f.direction]?c.directions[f.direction]:c.directions.any,_=Math.max(f.months,1);_--;){for((i=M.make("div",{class:h.calendar},m)).setAttribute("data-cal-index",_),1<f.months&&(_==Math.max(f.months-1,1)?M.addClassName(i,h.monthFirst):0===_?M.addClassName(i,h.monthLast):M.addClassName(i,h.monthMiddle)),s=M.make("div",{class:h.title},i),f.useYearNav||M.addClassName(s,h.disableYearNav),M.make("a",{class:h.previousYear},s),M.make("a",{class:h.previousMonth},s),M.make("a",{class:h.nextYear},s),M.make("a",{class:h.nextMonth},s),o=M.make("span",{class:h.caption},s),r=M.make("div",{class:h.header+" "+(1==f.dayHeaderClickable?h.dayActive:"")},i),v=0;d=M.make("span",{"data-day":v},r),1==f.dayHeaderClickable&&"multiple"==f.mode&&(d.addEventListener("mouseover",function(e){var t=e.target.parentNode.nextSibling;if(daysToHover=t.getElementsByClassName("k-day-week-"+e.target.getAttribute("data-day")),0<daysToHover.length)for(var n=0;n<daysToHover.length;n++)M.hasClassName(daysToHover[n],h.dayActive)&&M.addClassName(daysToHover[n],"k-day-hover-active")}),d.addEventListener("mouseleave",function(e){var t=e.target.parentNode.nextSibling;if(daysToHover=t.getElementsByClassName("k-day-week-"+e.target.getAttribute("data-day")),0<daysToHover.length)for(var n=0;n<daysToHover.length;n++)M.hasClassName(daysToHover[n],h.dayActive)&&M.removeClassName(daysToHover[n],"k-day-hover-active")})),d.innerHTML=b[v],++v<7;);for(l=M.make("div",{class:h.days},i),v=0,y=[];"week"==f.mode?(v%7==0&&(u=M.make("div",{class:h.week+" clearfix"},l),y.push(u)),M.make("span",{},u)):y.push(M.make("span",{},l)),++v<42;);p.push({header:r,caption:o,days:y}),_&&M.make("div",{class:h.monthSeparator},m)}c.draw(),M.addEvent(m,"mousedown",function(e,t){var n;if(M.hasClassName(t,h.nextMonth))return c.disableNext||!1===c.publish("view-changed",c,["next-month"])||(c.viewStartDate.add(1,"months"),c.draw()),!1;if(M.hasClassName(t,h.previousMonth))return c.disablePreviousMonth||!1===c.publish("view-changed",c,["previous-month"])||(c.viewStartDate.subtract(1,"months"),c.draw()),!1;if(M.hasClassName(t,h.nextYear))return c.disableNext||!1===c.publish("view-changed",c,["next-year"])||(c.viewStartDate.add(1,"years"),c.draw()),!1;if(M.hasClassName(t,h.previousYear))return c.disablePreviousMonth||!1===c.publish("view-changed",c,["previous-year"])||(c.viewStartDate.subtract(1,"years"),c.draw()),!1;if((M.hasClassName(t.parentNode,h.days)||M.hasClassName(t.parentNode,h.week))&&M.hasClassName(t,h.dayActive)&&(n=t.getAttribute("data-date"))){if(n=D(n,f.dayAttributeFormat).hours(12),!1!==c.publish("date-clicked",c,[n]))switch(f.mode){case"multiple":c.addSelected(n)||c.removeSelected(n);break;case"range":c.addSelected(n);break;case"week":c.weekSelected(n);break;case"single":default:c.addSelected(n)}return!1}if(M.hasClassName(t.parentNode,h.week)&&(n=t.getAttribute("data-date")))return n=D(n,f.dayAttributeFormat).hours(12),!1!==c.publish("date-clicked",c,[n])&&"week"==f.mode&&c.weekSelected(n),!1;if(M.hasClassName(t.parentNode,h.header)){if("multiple"==f.mode&&1==f.dayHeaderClickable){var a=M.hasClassName(t,h.daySelected),i=t.parentNode.parentNode.getAttribute("data-datestart"),s=t.getAttribute("data-day");1==a?c.monthDaySelected(i,s,!0):c.monthDaySelected(i,s,!1)}return!1}return!1}),(f.attachTo=M.$(f.attachTo))&&f.attachTo.appendChild(m)}};k.prototype={defaults:{attachTo:null,months:1,weekStart:0,disableDate:!1,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:!1,dayHeaderClickable:!1,format:null,subscribe:null,columnHeaderFormat:"dd",titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",useYearNav:!0,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",week:"k-week",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayInRangeStart:"k-range-start",dayInRangeEnd:"k-range-end",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(e){return D(e).startOf("day").yearDay()>=O()},"today-past":function(e){return D(e).startOf("day").yearDay()>O()},any:function(e){return!1},"today-future":function(e){return D(e).startOf("day").yearDay()<O()},future:function(e){return D(e).startOf("day").yearDay()<=O()}},getSelectedAsDates:function(){for(var e=[],t=0,n=this._sel.length;t<n;t++)e.push(this._sel[t].toDate());return e},getSelectedAsText:function(e){for(var t=[],n=0,a=this._sel.length;n<a;n++)t.push(this._sel[n].format(e||this.settings.format||"YYYY-MM-DD"));return t},getSelectedRaw:function(){for(var e=[],t=0,n=this._sel.length;t<n;t++)e.push(D(this._sel[t]));return e},getSelected:function(e){var t=this.getSelectedAsText(e);switch(this.settings.mode){case"week":case"range":return t.splice(2),t.join(this.settings.rangeDelimiter);case"multiple":return t.join(this.settings.multipleDelimiter);case"single":default:return t[0]||null}},isSelected:function(e){if((e=D(e).startOf("day").yearDay())<1||!this._sel||this._sel.length<1)return!1;switch(this.settings.mode){case"week":case"range":var t=this._sel[0]?this._sel[0].startOf("day").yearDay():0,n=this._sel[1]?this._sel[1].startOf("day").yearDay():0;return t===e||n===e?1:t&&n?(t<e&&e<n||t<n&&e<t&&n<e)&&-1:0;case"multiple":for(var a=this._sel.length;a--;)if(this._sel[a].startOf("day").yearDay()===e)return!0;return!1;case"single":default:return this._sel[0]&&this._sel[0].startOf("day").yearDay()===e}return!1},setSelected:function(e,t){var n,a=w(e,this.settings.parseSplitDelimiter,this.settings.format),i=w(this.getSelected(),this.settings.parseSplitDelimiter,this.settings.format);for(n=i.length;n--;)this.removeSelected(i[n],!1);for(n=a.length;n--;)this.addSelected(a[n],!1);!1!==t&&(a[0]&&(this.viewStartDate=D(a[0],this.settings.format)),this.draw())},addSelected:function(e,t){switch(e=D(e,this.settings.format).hours(12),this.settings.dayOutOfMonthClickable&&"range"!==this.settings.mode&&this.makeSelectedDateVisible(e),this.settings.mode){case"multiple":if(this.isSelected(e))return!1;this._sel.push(e);break;case"range":1!==this._sel.length?this._sel=[e]:e.startOf("day").yearDay()>this._sel[0].startOf("day").yearDay()?this._sel[1]=e:this._sel=[e,this._sel[0]];break;case"single":default:this._sel=[e]}return this._sel.sort(function(e,t){return e.startOf("day").yearDay()-t.startOf("day").yearDay()}),this.publish("change",this,[e]),!1!==t&&this.draw(),!0},weekSelected:function(e){var t=e.toDate(),n=D(t).startOf("week"),a=D(t).endOf("week").subtract(1,"day");this._sel=[n,a],this.publish("change",this,[e.day()]),this.draw()},monthDaySelected:function(e,t,n){var a=D(e).startOf("month").weekday(t),i=D(e).endOf("month");for(selected=[];a<=i;)a>=D(e).startOf("month")&&!this.direction(a)&&(n?this.removeSelected(D(a).hours(12)):this.addSelected(D(a).hours(12))),a.add(7,"d")},makeSelectedDateVisible:function(e){outOfViewMonth=D(e).date("1").diff(this.viewStartDate,"months"),outOfViewMonth<0?this.viewStartDate.subtract(1,"months"):0<outOfViewMonth&&outOfViewMonth>=this.settings.months&&this.viewStartDate.add(1,"months")},removeSelected:function(e,t){e=D(e,this.settings.format).hours(12);for(var n=this._sel.length;n--;)if(this._sel[n].startOf("day").yearDay()===e.startOf("day").yearDay())return this._sel.splice(n,1),this.publish("change",this,[e]),!1!==t&&this.draw(),!0;return!1},draw:function(){var e,t,n,a,i,s,o,r,l,u,d=D(this.viewStartDate).startOf("month").add(12,"hours"),c=this.classes,h=0,f=0,m=0,p=this.settings;i=this.calendars.length;do{(e=D(d).date(1)).day(e.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart),(t=this.calendars[h]).header.parentNode.setAttribute("data-datestart",d.format(this.settings.dayAttributeFormat)),t.caption.innerHTML=d.format(this.settings.titleFormat),r=[];for(var g=m=s=f=0;g<7;g++)M.removeClassName(t.header.children[g],c.daySelected),r[g]=0;for(;n="week"==p.mode?(f%7==0&&0!==f&&s++,t.days[s].childNodes[f%7]):t.days[f],a=[],(o=this.isSelected(e))&&a.push({"-1":c.dayInRange,1:c.daySelected,true:c.daySelected}[o]),"range"===p.mode&&(this._sel[0]&&this._sel[0].startOf("day").yearDay()===e.clone().startOf("day").yearDay()&&a.push(c.dayInRangeStart),this._sel[1]&&this._sel[1].startOf("day").yearDay()===e.clone().startOf("day").yearDay()&&a.push(c.dayInRangeEnd)),p.dayHeaderClickable&&"multiple"===p.mode&&(a.push("k-day-week-"+e.weekday()),1!=o&&1!=o||this.direction(e)||d.format("M")!=e.format("M")||(r[e.weekday()]=r[e.weekday()]+1)),e.month()!=d.month()?a.push(c.dayOutOfMonth):a.push(c.dayInMonth),(!(this.blackout(e)||this.direction(e)||e.month()!=d.month()&&!1===p.dayOutOfMonthClickable)||0<o)&&a.push(c.dayActive),e.clone().startOf("day").yearDay()===O()&&a.push(c.dayToday),l=e.format(this.settings.dayAttributeFormat),p.dateClassMap[l]&&a.push(p.dateClassMap[l]),n.innerHTML=e.format(p.dayNumberFormat),n.className=a.join(" "),n.setAttribute("data-date",l),e.add(1,"days"),++f<42;);if((g=0)<r.length)do{if(0<r[g]){var b=k.moment(d).startOf("month").weekday(g),y=k.moment(d).startOf("month");for(endMonth=k.moment(d).endOf("month"),m=0;y<=b&&!this.direction(b)&&m++,b.add(7,"d"),b<=endMonth;);m==r[g]?M.addClassName(t.header.children[g],c.daySelected):M.removeClassName(t.header.children[g],c.daySelected)}}while(++g<r.length);d.add(1,"months")}while(++h<i);if(p.directionScrolling){var v=D().startOf("day").hours(12);u=d.diff(v,"months",!0),"today-past"===p.direction||"past"===p.direction?u<=0?(this.disableNextMonth=!1,M.removeClassName(this.container,c.disableNextMonth)):(this.disableNextMonth=!0,M.addClassName(this.container,c.disableNextMonth)):"today-future"!==p.direction&&"future"!==p.direction||(u>p.months?(this.disablePreviousMonth=!1,M.removeClassName(this.container,c.disablePreviousMonth)):(this.disablePreviousMonth=!0,M.addClassName(this.container,c.disablePreviousMonth))),"today-past"===p.direction||"past"===p.direction?u<=-11?(this.disableNextYear=!1,M.removeClassName(this.container,c.disableNextYear)):(this.disableNextYear=!0,M.addClassName(this.container,c.disableNextYear)):"today-future"!==p.direction&&"future"!==p.direction||(u>11+p.months?(this.disablePreviousYear=!1,M.removeClassName(this.container,c.disablePreviousYear)):(this.disablePreviousYear=!0,M.addClassName(this.container,c.disablePreviousYear)))}if(p.disableDate){var _=new Date,S=_.getFullYear(),x=_.getMonth()+1,w=_.getDate();$(this.container).find(".k-week").each(function(e,t){var n=$(t).find("span"),o=!1;n.each(function(e,t){var n=$(t).attr("data-date").split("-"),a=Number(n[0]),i=Number(n[1]),s=Number(n[2]);if(!(S<a||a==S&&x<i||a==S&&i==x&&w<s))return!(o=!0)}),$(t).css("pointer-events","auto"),!o&&$(t).css("pointer-events","none")})}}};var w=function(e,t,n){var a=[];"string"==typeof e?e=e.split(t):M.isArray(e)||(e=[e]);for(var i,s=e.length,o=0;e[o]&&(i=D(e[o],n).hours(12)).isValid()&&a.push(i),++o<s;);return a},M=(window.Kalendae=k).util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},$:function(e){return"string"==typeof e?document.getElementById(e):e},$$:function(e){return document.querySelectorAll(e)},make:function(e,t,n){var a,i=document.createElement(e);if(t)for(a in t)t.hasOwnProperty(a)&&i.setAttribute(a,t[a]);return n&&n.appendChild(i),i},isVisible:function(e){return 0<e.offsetWidth||0<e.offsetHeight},getStyle:function(e,t){var n,a;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=(a=window.getComputedStyle(e,null))?a[t]:""),n},domReady:function(e){var t=document.readyState;"complete"===t||"interactive"===t?e():setTimeout(function(){M.domReady(e)},9)},addEvent:function(a,e,i){var t=function(e){var t=(e=e||window.event).target||e.srcElement,n=i.apply(a,[e,t]);return!1===n&&(e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0)),n};return a.attachEvent?a.attachEvent("on"+e,t):a.addEventListener(e,t,!1),t},removeEvent:function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},fireEvent:function(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}else document.createEventObject?e.fireEvent("on"+t):"function"==typeof e["on"+t]&&e["on"+t]()},hasClassName:function(e,t){if(!(e=M.$(e)))return!1;var n=e.className;return 0<n.length&&(n==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(n))},addClassName:function(e,t){(e=M.$(e))&&(M.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t))},removeClassName:function(e,t){(e=M.$(e))&&(e.className=M.trimString(e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ")))},isFixed:function(e){do{if("fixed"===M.getStyle(e,"position"))return!0}while(e=e.offsetParent);return!1},scrollContainer:function(e){do{var t=M.getStyle(e,"overflow");if("auto"===t||"scroll"===t)return e}while((e=e.parentNode)&&e!=window.document.body);return null},getPosition:function(e,t){var n=e.offsetLeft,a=e.offsetTop,i={};if(!t)for(;e=e.offsetParent;)n+=e.offsetLeft,a+=e.offsetTop;return i[0]=i.left=n,i[1]=i.top=a,i},getHeight:function(e){return e.offsetHeight||e.scrollHeight},getWidth:function(e){return e.offsetWidth||e.scrollWidth},trimString:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var a=!0===arguments[0],e={},t=a?1:0,n=function(e,t){if("object"==typeof t){for(var n in t)t.hasOwnProperty(n)&&(a&&"object"==typeof e[n]&&"object"==typeof t[n]?_update(e[n],t[n]):e[n]=t[n]);return e}};t<arguments.length;t++)n(e,arguments[t]);return e},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)}};"function"==typeof document.addEventListener&&k.util.domReady(function(){for(var e,t,n,a=M.$$(".auto-kal"),i=a.length;i--;)t=null==(n=(e=a[i]).getAttribute("data-kal"))||""==n?{}:new Function("return {"+n+"};")(),"INPUT"===e.tagName?new k.Input(e,t):new k(M.merge(t,{attachTo:e}))}),k.Input=function(e,t){if("function"==typeof document.addEventListener||M.isIE8()){var n,a,i=this.input=M.$(e),s=!1;if(!i||"INPUT"!==i.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var o=this,r=o.classes,l=o.settings=M.merge(o.defaults,t);this._events={},l.attachTo=window.document.body,l.selected?n=!0:l.selected=i.value,k.call(o,l),l.closeButton&&(a=M.make("a",{class:r.closeButton},o.container),M.addEvent(a,"click",function(){i.blur()})),n&&(i.value=o.getSelected());var u=o.container,d=!1;u.style.display="none",M.addClassName(u,r.positioned),this._events.containerMouseDown=M.addEvent(u,"mousedown",function(e,t){d=!0}),this._events.documentMousedown=M.addEvent(window.document,"mousedown",function(e,t){d=!1}),this._events.inputFocus=M.addEvent(i,"focus",function(){s=!0,o.setSelected(this.value),s=!1,o.show()}),this._events.inputBlur=M.addEvent(i,"blur",function(){d&&M.isIE8()?(d=!1,i.focus()):o.hide()}),this._events.inputKeyup=M.addEvent(i,"keyup",function(e){s=!0;var t=w(this.value,o.settings.parseSplitDelimiter,o.settings.format);t&&t.length&&t[0]&&1e3<t[0].year()?o.setSelected(this.value):(o.setSelected("",null),o.viewStartDate=D(o.defaultView),o.draw()),s=!1});var c=M.scrollContainer(i);c&&M.addEvent(c,"scroll",function(e){i.blur()}),o.subscribe("change",function(){s||(i.value=o.getSelected(),M.fireEvent(i,"change"))})}},k.Input.prototype=M.merge(k.prototype,{defaults:M.merge(k.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:M.merge(k.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var e=this.container,t=e.style,n=this.input,a=M.getPosition(n),i=M.scrollContainer(n),s=i?i.scrollTop:0,o=i?i.scrollLeft:0,r=this.settings;switch(t.display="",r.side){case"left":t.left=a.left-M.getWidth(e)+r.offsetLeft-o+"px",t.top=a.top+r.offsetTop-s+"px";break;case"right":t.left=a.left+M.getWidth(n)-o+"px",t.top=a.top+r.offsetTop-s+"px";break;case"top":t.left=a.left+r.offsetLeft-o+"px",t.top=a.top-M.getHeight(e)+r.offsetTop-s+"px";break;case"bottom right":t.left=a.left-M.getWidth(e)+M.getWidth(n)+r.offsetLeft+"px",t.top=a.top+M.getHeight(n)+r.offsetTop-s+"px";break;case"middle":t.left="0px",t.top="0px";break;case"bottom":default:t.left=a.left+r.offsetLeft-o+"px",t.top=a.top+M.getHeight(n)+r.offsetTop-s+"px"}t.position=M.isFixed(n)?"fixed":"absolute",this.publish("show",this)},hide:function(){this.container.style.display="none",this.publish("hide",this)},destroy:function(){var e=this.container,t=this.input;M.removeEvent(e,"mousedown",this._events.containerMousedown),M.removeEvent(window.document,"mousedown",this._events.documentMousedown),M.removeEvent(t,"focus",this._events.inputFocus),M.removeEvent(t,"blur",this._events.inputBlur),M.removeEvent(t,"keyup",this._events.inputKeyup),e.parentNode&&e.parentNode.removeChild(e)}});var T=function(e){e||(e=this);var o=e.c_||{};e.publish=function(e,t,n){for(var a,i=o[e],s=i?i.length:0;s--;)if("boolean"==typeof(a=i[s].apply(t,n||[])))return a},e.subscribe=function(e,t,n){return o[e]||(o[e]=[]),n?o[e].push(t):o[e].unshift(t),[e,t]},e.unsubscribe=function(e){for(var t=o[e[0]],n=e[1],a=t?t.length:0;a--;)t[a]===n&&t.splice(a,1)}};if(function(f){var p,e,t="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,m=Math.round,n=Object.prototype.hasOwnProperty,g=0,l=1,c=2,b=3,h=4,y=5,v=6,a={},s=[],i="undefined"!=typeof module&&module&&module.exports,o=/^\/?Date\((\-?\d+)/i,_=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,S=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,x=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,r=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,u=/\d\d?/,d=/\d{1,3}/,w=/\d{1,4}/,D=/[+\-]?\d{1,6}/,O=/\d+/,k=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$=/Z|[\+\-]\d\d:?\d\d/gi,M=/T/i,T=/[\+\-]?\d+/,A=/[\+\-]?\d+(\.\d{1,3})?/,C=/\d/,Y=/\d\d/,B=/\d{3}/,E=/\d{4}/,N=/[+-]?\d{6}/,j=/[+-]?\d+/,I=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,F=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],L=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],U=/([\+\-]|\d\d)/gi,P=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),H={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},W={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},G={},R={s:45,m:45,h:22,d:26,M:11},z="DDD w W M D d".split(" "),V="M D H h m s w W".split(" "),q={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return de(this.year()%100,2)},YYYY:function(){return de(this.year(),4)},YYYYY:function(){return de(this.year(),5)},YYYYYY:function(){var e=this.year();return(0<=e?"+":"-")+de(Math.abs(e),6)},gg:function(){return de(this.weekYear()%100,2)},gggg:function(){return de(this.weekYear(),4)},ggggg:function(){return de(this.weekYear(),5)},GG:function(){return de(this.isoWeekYear()%100,2)},GGGG:function(){return de(this.isoWeekYear(),4)},GGGGG:function(){return de(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return _e(this.milliseconds()/100)},SS:function(){return de(_e(this.milliseconds()/10),2)},SSS:function(){return de(this.milliseconds(),3)},SSSS:function(){return de(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+de(_e(e/60),2)+":"+de(_e(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+de(_e(e/60),2)+de(_e(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Z={},J=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],Q=!1;function K(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function X(e,t){return n.call(e,t)}function ee(e){!1===p.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function te(e,t){var n=!0;return re(function(){return n&&(ee(e),n=!1),t.apply(this,arguments)},t)}function ne(t,n){return function(e){return de(t.call(this,e),n)}}function ae(t,n){return function(e){return this.localeData().ordinal(t.call(this,e),n)}}for(;z.length;)e=z.pop(),q[e+"o"]=ae(q[e],e);for(;V.length;)e=V.pop(),q[e+e]=ne(q[e],2);function ie(){}function se(e,t){!1!==t&&Oe(e),le(this,e),this._d=new Date(+e._d),!1===Q&&(Q=!0,p.updateOffset(this),Q=!1)}function oe(e){var t=ye(e),n=t.year||0,a=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,r=t.hour||0,l=t.minute||0,u=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*u+6e4*l+36e5*r,this._days=+o+8*s,this._months=+i+3*a+12*n,this._data={},this._locale=p.localeData(),this._bubble()}function re(e,t){for(var n in t)X(t,n)&&(e[n]=t[n]);return X(t,"toString")&&(e.toString=t.toString),X(t,"valueOf")&&(e.valueOf=t.valueOf),e}function le(e,t){var n,a,i;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=t._pf),void 0!==t._locale&&(e._locale=t._locale),0<s.length)for(n in s)void 0!==(i=t[a=s[n]])&&(e[a]=i);return e}function ue(e){return e<0?Math.ceil(e):Math.floor(e)}function de(e,t,n){for(var a=""+Math.abs(e),i=0<=e;a.length<t;)a="0"+a;return(i?n?"+":"":"-")+a}function ce(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function he(s,o){return function(e,t){var n,a,i;return null===t||isNaN(+t)||(i="moment()."+(a=o)+"(period, number) is deprecated. Please use moment()."+o+"(number, period).",Z[a]||(ee(i),Z[a]=!0),n=e,e=t,t=n),e="string"==typeof e?+e:e,fe(this,p.duration(e,t),s),this}}function fe(e,t,n,a){var i=t._milliseconds,s=t._days,o=t._months;a=null==a||a,i&&e._d.setTime(+e._d+i*n),s&&ze(e,"Date",Re(e,"Date")+s*n),o&&Ge(e,Re(e,"Month")+o*n),a&&p.updateOffset(e,s||o)}function me(e){return"[object Array]"===Object.prototype.toString.call(e)}function pe(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function ge(e,t,n){var a,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(a=0;a<i;a++)(n&&e[a]!==t[a]||!n&&_e(e[a])!==_e(t[a]))&&o++;return o+s}function be(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=H[e]||W[t]||t}return e}function ye(e){var t,n,a={};for(n in e)X(e,n)&&(t=be(n))&&(a[t]=e[n]);return a}function ve(o){var r,l;if(0===o.indexOf("week"))r=7,l="day";else{if(0!==o.indexOf("month"))return;r=12,l="month"}p[o]=function(n,e){var t,a,i=p._locale[o],s=[];if("number"==typeof n&&(e=n,n=f),a=function(e){var t=p().utc().set(l,e);return i.call(p._locale,t,n||"")},null!=e)return a(e);for(t=0;t<r;t++)s.push(a(t));return s}}function _e(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=0<=t?Math.floor(t):Math.ceil(t)),n}function Se(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function xe(e,t,n){return Pe(p([e,11,31+t-n]),t,n).week}function we(e){return De(e)?366:365}function De(e){return e%4==0&&e%100!=0||e%400==0}function Oe(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[l]<0||11<e._a[l]?l:e._a[c]<1||e._a[c]>Se(e._a[g],e._a[l])?c:e._a[b]<0||24<e._a[b]||24===e._a[b]&&(0!==e._a[h]||0!==e._a[y]||0!==e._a[v])?b:e._a[h]<0||59<e._a[h]?h:e._a[y]<0||59<e._a[y]?y:e._a[v]<0||999<e._a[v]?v:-1,e._pf._overflowDayOfYear&&(t<g||c<t)&&(t=c),e._pf.overflow=t)}function ke(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===f)),e._isValid}function $e(e){return e?e.toLowerCase().replace("_","-"):e}function Me(e){var t=null;if(!a[e]&&i)try{t=p.locale(),require("./locale/"+e),p.locale(t)}catch(e){}return a[e]}function Te(e,t){var n,a;return t._isUTC?(n=t.clone(),a=(p.isMoment(e)||pe(e)?+e:+p(e))-+n,n._d.setTime(+n._d+a),p.updateOffset(n,!1),n):p(e).local()}function Ae(e,t){return e.isValid()?(t=Ce(t,e.localeData()),G[t]||(G[t]=function(n){var a,i,e,s=n.match(x);for(a=0,i=s.length;a<i;a++)q[s[a]]?s[a]=q[s[a]]:s[a]=(e=s[a]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){var t="";for(a=0;a<i;a++)t+=s[a]instanceof Function?s[a].call(e,n):s[a];return t}}(t)),G[t](e)):e.localeData().invalidDate()}function Ce(e,t){var n=5;function a(e){return t.longDateFormat(e)||e}for(r.lastIndex=0;0<=n&&r.test(e);)e=e.replace(r,a),r.lastIndex=0,n-=1;return e}function Ye(e,t){var n,a=t._strict;switch(e){case"Q":return C;case"DDDD":return B;case"YYYY":case"GGGG":case"gggg":return a?E:w;case"Y":case"G":case"g":return j;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return a?N:D;case"S":if(a)return C;case"SS":if(a)return Y;case"SSS":if(a)return B;case"DDD":return d;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return k;case"a":case"A":return t._locale._meridiemParse;case"x":return T;case"X":return A;case"Z":case"ZZ":return $;case"T":return M;case"SSSS":return O;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return a?Y:u;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return u;case"Do":return a?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return new RegExp((n=e.replace("\\",""),n.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,a,i){return t||n||a||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")))}}function Be(e){var t=(e=e||"").match($)||[],n=((t[t.length-1]||[])+"").match(U)||["-",0,0],a=60*n[1]+_e(n[2]);return"+"===n[0]?a:-a}function Ee(e,t,n){var a,i=n._a;switch(e){case"Q":null!=t&&(i[l]=3*(_e(t)-1));break;case"M":case"MM":null!=t&&(i[l]=_e(t)-1);break;case"MMM":case"MMMM":null!=(a=n._locale.monthsParse(t,e,n._strict))?i[l]=a:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[c]=_e(t));break;case"Do":null!=t&&(i[c]=_e(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=_e(t));break;case"YY":i[g]=p.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[g]=_e(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":i[b]=_e(t);break;case"m":case"mm":i[h]=_e(t);break;case"s":case"ss":i[y]=_e(t);break;case"S":case"SS":case"SSS":case"SSSS":i[v]=_e(1e3*("0."+t));break;case"x":n._d=new Date(_e(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=Be(t);break;case"dd":case"ddd":case"dddd":null!=(a=n._locale.weekdaysParse(t))?(n._w=n._w||{},n._w.d=a):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=_e(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=p.parseTwoDigitYear(t)}}function Ne(e){var t,n,a,i,s,o,r,l,u,d,c,h,f,m;null!=(t=e._w).GG||null!=t.W||null!=t.E?(s=1,o=4,n=K(t.GG,e._a[g],Pe(p(),1,4).year),a=K(t.W,1),i=K(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=K(t.gg,e._a[g],Pe(p(),s,o).year),a=K(t.w,1),null!=t.d?(i=t.d)<s&&++a:i=null!=t.e?t.e+s:s),u=a,d=i,c=o,h=s,m=Ue(l=n,0,1).getUTCDay(),r={year:0<(f=7*(u-1)+((d=null!=d?d:h)-h)+(h-(m=0===m?7:m)+(c<m?7:0)-(m<h?7:0))+1)?l:l-1,dayOfYear:0<f?f:we(l-1)+f},e._a[g]=r.year,e._dayOfYear=r.dayOfYear}function je(e){var t,n,a,i,s=[];if(!e._d){var o,r;for(o=e,r=new Date,a=o._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()],e._w&&null==e._a[c]&&null==e._a[l]&&Ne(e),e._dayOfYear&&(i=K(e._a[g],a[g]),e._dayOfYear>we(i)&&(e._pf._overflowDayOfYear=!0),n=Ue(i,0,e._dayOfYear),e._a[l]=n.getUTCMonth(),e._a[c]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=a[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[b]&&0===e._a[h]&&0===e._a[y]&&0===e._a[v]&&(e._nextDay=!0,e._a[b]=0),e._d=(e._useUTC?Ue:function(e,t,n,a,i,s,o){var r=new Date(e,t,n,a,i,s,o);e<1970&&r.setFullYear(e);return r}).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[b]=24)}}function Ie(e){if(e._f!==p.ISO_8601){e._a=[],e._pf.empty=!0;var t,n,a,i,s,o,r,l,u,d=""+e._i,c=d.length,h=0;for(a=Ce(e._f,e._locale).match(x)||[],t=0;t<a.length;t++)i=a[t],(n=(d.match(Ye(i,e))||[])[0])&&(0<(s=d.substr(0,d.indexOf(n))).length&&e._pf.unusedInput.push(s),d=d.slice(d.indexOf(n)+n.length),h+=n.length),q[i]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(i),Ee(i,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=c-h,0<d.length&&e._pf.unusedInput.push(d),!0===e._pf.bigHour&&e._a[b]<=12&&(e._pf.bigHour=f),e._a[b]=(o=e._locale,r=e._a[b],null==(l=e._meridiem)?r:null!=o.meridiemHour?o.meridiemHour(r,l):(null!=o.isPM&&((u=o.isPM(l))&&r<12&&(r+=12),u||12!==r||(r=0)),r)),je(e),Oe(e)}else Fe(e)}function Fe(e){var t,n,a=e._i,i=I.exec(a);if(i){for(e._pf.iso=!0,t=0,n=F.length;t<n;t++)if(F[t][1].exec(a)){e._f=F[t][0]+(i[6]||" ");break}for(t=0,n=L.length;t<n;t++)if(L[t][1].exec(a)){e._f+=L[t][0];break}a.match($)&&(e._f+="Z"),Ie(e)}else e._isValid=!1}function Le(e){var t,n,a,i,s=e._i;s===f?e._d=new Date:pe(s)?e._d=new Date(+s):null!==(t=o.exec(s))?e._d=new Date(+t[1]):"string"==typeof s?(Fe(i=e),!1===i._isValid&&(delete i._isValid,p.createFromInputFallback(i))):me(s)?(e._a=function(e,t){var n,a=[];for(n=0;n<e.length;++n)a.push(t(e[n],n));return a}(s.slice(0),function(e){return parseInt(e,10)}),je(e)):"object"==typeof s?(n=e)._d||(a=ye(n._i),n._a=[a.year,a.month,a.day||a.date,a.hour,a.minute,a.second,a.millisecond],je(n)):"number"==typeof s?e._d=new Date(s):p.createFromInputFallback(e)}function Ue(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Pe(e,t,n){var a,i=n-t,s=n-e.day();return i<s&&(s-=7),s<i-7&&(s+=7),a=p(e).add(s,"d"),{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function He(e){var t,n=e._i,a=e._f;return e._locale=e._locale||p.localeData(e._l),null===n||a===f&&""===n?p.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),p.isMoment(n)?new se(n,!0):(a?me(a)?function(e){var t,n,a,i,s;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)s=0,t=le({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},t._f=e._f[i],Ie(t),ke(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==a||s<a)&&(a=s,n=t));re(e,n||t)}(e):Ie(e):Le(e),(t=new se(e))._nextDay&&(t.add(1,"d"),t._nextDay=f),t))}function We(e,t){var n,a;if(1===t.length&&me(t[0])&&(t=t[0]),!t.length)return p();for(n=t[0],a=1;a<t.length;++a)t[a][e](n)&&(n=t[a]);return n}for(q.DDDD=ne(q.DDD,3),re(ie.prototype,{set:function(e){var t,n;for(n in e)"function"==typeof(t=e[n])?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var a,i,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(i=p.utc([2e3,a]),n&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[a]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[a]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[a].test(e))return a;if(n&&"MMM"===t&&this._shortMonthsParse[a].test(e))return a;if(!n&&this._monthsParse[a].test(e))return a}},_weekdays:"星期天_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"周天_周一_周二_周三_周四_周五_周六".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"日_一_二_三_四_五_六".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,a;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(n=p([2e3,1]).day(t),a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(a.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var a=this._calendar[e];return"function"==typeof a?a.apply(t,[n]):a},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,a){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,a):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[0<e?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Pe(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),(p=function(e,t,n,a){var i;return"boolean"==typeof n&&(a=n,n=f),(i={_isAMomentObject:!0})._i=e,i._f=t,i._l=n,i._strict=a,i._isUTC=!1,i._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},He(i)}).suppressDeprecationWarnings=!1,p.createFromInputFallback=te("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),p.min=function(){return We("isBefore",[].slice.call(arguments,0))},p.max=function(){return We("isAfter",[].slice.call(arguments,0))},p.utc=function(e,t,n,a){var i;return"boolean"==typeof n&&(a=n,n=f),(i={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0})._l=n,i._i=e,i._f=t,i._strict=a,i._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},He(i).utc()},p.unix=function(e){return p(1e3*e)},p.duration=function(e,t){var n,a,i,s,o,r,l,u=e,d=null;return p.isDuration(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(u={},t?u[t]=e:u.milliseconds=e):(d=_.exec(e))?(n="-"===d[1]?-1:1,u={y:0,d:_e(d[c])*n,h:_e(d[b])*n,m:_e(d[h])*n,s:_e(d[y])*n,ms:_e(d[v])*n}):(d=S.exec(e))?(n="-"===d[1]?-1:1,u={y:(i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n})(d[2]),M:i(d[3]),d:i(d[4]),h:i(d[5]),m:i(d[6]),s:i(d[7]),w:i(d[8])}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(o=p(u.from),r=Te(r=p(u.to),o),o.isBefore(r)?l=ce(o,r):((l=ce(r,o)).milliseconds=-l.milliseconds,l.months=-l.months),(u={}).ms=(s=l).milliseconds,u.M=s.months),a=new oe(u),p.isDuration(e)&&X(e,"_locale")&&(a._locale=e._locale),a},p.version="2.9.0",p.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",p.ISO_8601=function(){},p.momentProperties=s,p.updateOffset=function(){},p.relativeTimeThreshold=function(e,t){return R[e]!==f&&(t===f?R[e]:(R[e]=t,!0))},p.lang=te("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return p.locale(e,t)}),p.locale=function(e,t){var n;return e&&(n=void 0!==t?p.defineLocale(e,t):p.localeData(e))&&(p.duration._locale=p._locale=n),p._locale._abbr},p.defineLocale=function(e,t){return null!==t?(t.abbr=e,a[e]||(a[e]=new ie),a[e].set(t),p.locale(e),a[e]):(delete a[e],null)},p.langData=te("moment.langData is deprecated. Use moment.localeData instead.",function(e){return p.localeData(e)}),p.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return p._locale;if(!me(e)){if(t=Me(e))return t;e=[e]}return function(e){for(var t,n,a,i,s=0;s<e.length;){for(t=(i=$e(e[s]).split("-")).length,n=(n=$e(e[s+1]))?n.split("-"):null;0<t;){if(a=Me(i.slice(0,t).join("-")))return a;if(n&&n.length>=t&&ge(i,n,!0)>=t-1)break;t--}s++}return null}(e)},p.isMoment=function(e){return e instanceof se||null!=e&&X(e,"_isAMomentObject")},p.isDuration=function(e){return e instanceof oe},e=J.length-1;0<=e;--e)ve(J[e]);function Ge(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))||(n=Math.min(e.date(),Se(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)),e}function Re(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ze(e,t,n){return"Month"===t?Ge(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function Ve(t,n){return function(e){return null!=e?(ze(this,t,e),p.updateOffset(this,n),this):Re(this,t)}}function qe(e){return 400*e/146097}function Ze(e){return 146097*e/400}function Je(e){p.duration.fn[e]=function(){return this._data[e]}}for(e in p.normalizeUnits=function(e){return be(e)},p.invalid=function(e){var t=p.utc(NaN);return null!=e?re(t._pf,e):t._pf.userInvalidated=!0,t},p.parseZone=function(){return p.apply(null,arguments).parseZone()},p.parseTwoDigitYear=function(e){return _e(e)+(68<_e(e)?1900:2e3)},p.isDate=pe,re(p.fn=se.prototype,{clone:function(){return p(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=p(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():Ae(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Ae(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return ke(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&0<ge(this._a,(this._isUTC?p.utc(this._a):p(this._a)).toArray()))},parsingFlags:function(){return re({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=Ae(this,e||p.defaultFormat);return this.localeData().postformat(t)},add:he(1,"add"),subtract:he(-1,"subtract"),diff:function(e,t,n){var a,i,s,o,r,l,u=Te(e,this),d=6e4*(u.utcOffset()-this.utcOffset());return"year"===(t=be(t))||"month"===t||"quarter"===t?(s=this,r=12*((o=u).year()-s.year())+(o.month()-s.month()),l=s.clone().add(r,"months"),i=-(r+(o-l<0?(o-l)/(l-s.clone().add(r-1,"months")):(o-l)/(s.clone().add(r+1,"months")-l))),"quarter"===t?i/=3:"year"===t&&(i/=12)):(a=this-u,i="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-d)/864e5:"week"===t?(a-d)/6048e5:a),n?i:ue(i)},from:function(e,t){return p.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(p(),e)},calendar:function(e){var t=e||p(),n=Te(t,this).startOf("day"),a=this.diff(n,"days",!0),i=a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,p(t)))},isLeapYear:function(){return De(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){if("string"==typeof e)if(isNaN(e)){if("number"!=typeof(e=t.weekdaysParse(e)))return null}else e=parseInt(e,10);return e}(e,this.localeData()),this.add(e-t,"d")):t},month:Ve("Month",!0),startOf:function(e){switch(e=be(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return(e=be(e))===f||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return"millisecond"===(t=be(void 0!==t?t:"millisecond"))?+(e=p.isMoment(e)?e:p(e))<+this:(p.isMoment(e)?+e:+p(e))<+this.clone().startOf(t)},isBefore:function(e,t){var n;return"millisecond"===(t=be(void 0!==t?t:"millisecond"))?+this<+(e=p.isMoment(e)?e:p(e)):(n=p.isMoment(e)?+e:+p(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return"millisecond"===(t=be(t||"millisecond"))?+this==+(e=p.isMoment(e)?e:p(e)):(n=+p(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:te("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return(e=p.apply(null,arguments))<this?this:e}),max:te("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return this<(e=p.apply(null,arguments))?this:e}),zone:te("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,a=this._offset||0;return null!=e?("string"==typeof e&&(e=Be(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),a!==e&&(!t||this._changeInProgress?fe(this,p.duration(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,p.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?a:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Be(this._i)),this},hasAlignedHourOffset:function(e){return e=e?p(e).utcOffset():0,(this.utcOffset()-e)%60==0},daysInMonth:function(){return Se(this.year(),this.month())},dayOfYear:function(e){var t=m((p(this).startOf("day")-p(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=Pe(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=Pe(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=Pe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return xe(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return xe(this.year(),e.dow,e.doy)},get:function(e){return this[e=be(e)]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else"function"==typeof this[e=be(e)]&&this[e](t);return this},locale:function(e){var t;return e===f?this._locale._abbr:(null!=(t=p.localeData(e))&&(this._locale=t),this)},lang:te("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===f?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),p.fn.millisecond=p.fn.milliseconds=Ve("Milliseconds",!1),p.fn.second=p.fn.seconds=Ve("Seconds",!1),p.fn.minute=p.fn.minutes=Ve("Minutes",!1),p.fn.hour=p.fn.hours=Ve("Hours",!0),p.fn.date=Ve("Date",!0),p.fn.dates=te("dates accessor is deprecated. Use date instead.",Ve("Date",!0)),p.fn.year=Ve("FullYear",!0),p.fn.years=te("years accessor is deprecated. Use year instead.",Ve("FullYear",!0)),p.fn.days=p.fn.day,p.fn.months=p.fn.month,p.fn.weeks=p.fn.week,p.fn.isoWeeks=p.fn.isoWeek,p.fn.quarters=p.fn.quarter,p.fn.toJSON=p.fn.toISOString,p.fn.isUTC=p.fn.isUtc,re(p.duration.fn=oe.prototype,{_bubble:function(){var e,t,n,a=this._milliseconds,i=this._days,s=this._months,o=this._data,r=0;o.milliseconds=a%1e3,e=ue(a/1e3),o.seconds=e%60,t=ue(e/60),o.minutes=t%60,n=ue(t/60),o.hours=n%24,i+=ue(n/24),s+=ue((i-=ue(Ze(r=ue(qe(i)))))/30),i%=30,r+=ue(s/12),s%=12,o.days=i,o.months=s,o.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return ue(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_e(this._months/12)},humanize:function(e){var t,n,a,i,s,o,r,l,u,d,c,h=(n=!e,a=(t=this).localeData(),i=p.duration(t).abs(),s=m(i.as("s")),o=m(i.as("m")),r=m(i.as("h")),l=m(i.as("d")),u=m(i.as("M")),d=m(i.as("y")),(c=s<R.s&&["s",s]||1===o&&["m"]||o<R.m&&["mm",o]||1===r&&["h"]||r<R.h&&["hh",r]||1===l&&["d"]||l<R.d&&["dd",l]||1===u&&["M"]||u<R.M&&["MM",u]||1===d&&["y"]||["yy",d])[2]=n,c[3]=0<+t,c[4]=a,function(e,t,n,a,i){return i.relativeTime(t||1,!!n,e,a)}.apply({},c));return e&&(h=this.localeData().pastFuture(+this,h)),this.localeData().postformat(h)},add:function(e,t){var n=p.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=p.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return this[(e=be(e)).toLowerCase()+"s"]()},as:function(e){var t,n;if("month"===(e=be(e))||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*qe(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Ze(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:p.fn.lang,locale:p.fn.locale,toIsoString:te("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),a=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(a||i||s?"T":"")+(a?a+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),p.duration.fn.toString=p.duration.fn.toISOString,P)X(P,e)&&Je(e.toLowerCase());p.duration.fn.asMilliseconds=function(){return this.as("ms")},p.duration.fn.asSeconds=function(){return this.as("s")},p.duration.fn.asMinutes=function(){return this.as("m")},p.duration.fn.asHours=function(){return this.as("h")},p.duration.fn.asDays=function(){return this.as("d")},p.duration.fn.asWeeks=function(){return this.as("weeks")},p.duration.fn.asMonths=function(){return this.as("M")},p.duration.fn.asYears=function(){return this.as("y")},p.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===_e(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.moment=p}.call(k),void 0!==D&&(k.moment=D),!k.moment){if(!window.moment)throw"Kalendae requires moment.js. You must use kalendae.standalone.js if moment is not available on the page.";k.moment=window.moment}return(D=k.moment).fn.yearDay=function(e){var t=Math.floor(this._d/864e5);return void 0===e?t:this.add({d:e-t})},"undefined"==typeof jQuery||"function"!=typeof document.addEventListener&&!M.isIE8()||(jQuery.fn.kalendae=function(n){return this.each(function(e,t){"INPUT"===t.tagName?jQuery(t).data("kalendae",new k.Input(t,n)):jQuery(t).data("kalendae",new k(jQuery.extend({},{attachTo:t},n)))}),this}),k},"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.Kalendae=t()}(),function(){function t(e){var t=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=t.label||t.value,this.value=t.value}function o(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function e(e,t){return s.call((t||document).querySelectorAll(e))}function n(){e("input.awesomplete").forEach(function(e){new a(e)})}var a=function(e,t){var n=this;Awesomplete.count=(Awesomplete.count||0)+1,this.count=Awesomplete.count,this.isOpened=!1,this.input=o(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),t=t||{},function(e,t,n){for(var a in t){var i=t[a],s=e.input.getAttribute("data-"+a.toLowerCase());"number"==typeof i?e[a]=parseInt(s):!1===i?e[a]=null!==s:i instanceof Function?e[a]=null:e[a]=s,e[a]||0===e[a]||(e[a]=a in n?n[a]:i)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:a.DATA,filter:a.FILTER_CONTAINS,sort:!1!==t.sort&&a.SORT_BYLENGTH,item:a.ITEM,replace:a.REPLACE},t),this.index=-1,this.container=o.create("div",{className:"awesomplete",around:e}),this.ul=o.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=o.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(e){var t=e.keyCode;n.opened&&(13===t&&n.selected?(e.preventDefault(),n.select()):27===t?n.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),n[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(e){e.preventDefault()},click:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),n.select(t,e.target))}}}},o.bind(this.input,this._events.input),o.bind(this.input.form,this._events.form),o.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||t.list||[],a.all.push(this)};a.prototype={set list(e){if(Array.isArray(e))this._list=e;else if("string"==typeof e&&-1<e.indexOf(","))this._list=e.split(/\s*,\s*/);else if((e=o(e))&&e.children){var i=[];s.apply(e.children).forEach(function(e){if(!e.disabled){var t=e.textContent.trim(),n=e.value||t,a=e.label||t;""!==n&&i.push({label:a,value:n})}}),this._list=i}document.activeElement===this.input&&this.evaluate()},get selected(){return-1<this.index},get opened(){return this.isOpened},close:function(e){this.opened&&(this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),o.fire(this.input,"awesomplete-close",e||{}))},open:function(){this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),o.fire(this.input,"awesomplete-open")},destroy:function(){o.unbind(this.input,this._events.input),o.unbind(this.input.form,this._events.form);var e=this.container.parentNode;e.insertBefore(this.input,this.container),e.removeChild(this.container),this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var t=a.all.indexOf(this);-1!==t&&a.all.splice(t,1)},next:function(){var e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)},previous:function(){var e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)},goto:function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),-1<(this.index=e)&&0<t.length&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent+", list item "+(e+1)+" of "+t.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=t[e].offsetTop-this.ul.clientHeight+t[e].clientHeight,o.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(e,t){if(e?this.index=o.siblingIndex(e):e=this.ul.children[this.index],e){var n=this.suggestions[this.index];o.fire(this.input,"awesomplete-select",{text:n,origin:t||e})&&(this.replace(n),this.close({reason:"select"}),o.fire(this.input,"awesomplete-selectcomplete",{text:n}))}},evaluate:function(){var n=this,a=this.input.value;a.length>=this.minChars&&this._list&&0<this._list.length?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(e){return new t(n.data(e,a))}).filter(function(e){return n.filter(e,a)}),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(e,t){n.ul.appendChild(n.item(e,a,t))}),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},a.all=[],a.FILTER_CONTAINS=function(e,t){return RegExp(o.regExpEscape(t.trim()),"i").test(e)},a.FILTER_STARTSWITH=function(e,t){return RegExp("^"+o.regExpEscape(t.trim()),"i").test(e)},a.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1},a.ITEM=function(e,t,n){return o.create("li",{innerHTML:""===t.trim()?e:e.replace(RegExp(o.regExpEscape(t.trim()),"gi"),"<mark>$&</mark>"),"aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+n})},a.REPLACE=function(e){this.input.value=e.value},a.DATA=function(e){return e},Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};var s=Array.prototype.slice;o.create=function(e,t){var n=document.createElement(e);for(var a in t){var i=t[a];if("inside"===a)o(i).appendChild(n);else if("around"===a){var s=o(i);s.parentNode.insertBefore(n,s),n.appendChild(s)}else a in n?n[a]=i:n.setAttribute(a,i)}return n},o.bind=function(t,e){if(t)for(var n in e){var a=e[n];n.split(/\s+/).forEach(function(e){t.addEventListener(e,a)})}},o.unbind=function(t,e){if(t)for(var n in e){var a=e[n];n.split(/\s+/).forEach(function(e){t.removeEventListener(e,a)})}},o.fire=function(e,t,n){var a=document.createEvent("HTMLEvents");for(var i in a.initEvent(t,!0,!0),n)a[i]=n[i];return e.dispatchEvent(a)},o.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},o.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof Document&&("loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)),a.$=o,a.$$=e,"undefined"!=typeof self&&(self.Awesomplete=a),"object"==typeof module&&module.exports&&(module.exports=a)}(),function(){$.MsgBox={Alert:function(e,t,n){a("alert",e,t),s(n),r()},Judge:function(e,t,n){a("judge",e,t),o(n),r()},Confirm:function(e,t,n){a("confirm",e,t),s(n),r()},Prompt:function(e,t,n){a("prompt",e,t),s(n),r()},Remind:function(e,t,n){a("remind",e,t),s(n),r()}};var a=function(e,t,n){var a="";a+='<div id="mb_box"></div><div id="mb_con"><span id="mb_tit">'+t+"</span>",a+='<a id="mb_ico"></a><div id="mb_msg">'+n+'</div><div id="mb_btnbox">',"alert"==e&&(a+='<input id="mb_btn_ok" type="button" value="确定" />'),"judge"==e&&(a+='<input id="mb_jug_ok" type="button" value="确定" />'),"confirm"==e&&(a+='<input id="mb_btn_ok" type="button" value="是" />',a+='<input id="mb_btn_no" type="button" value="否" />'),"prompt"==e&&(a+='<span style="display:inline-block;width:100%;height:27px;background:#00aeef"></span>'),"remind"==e&&(a+='<span style="display:inline-block;width:100%;height:27px;background:#fff;margin-top: -1px;"></span>'),a+="</div></div>",$("body").append(a),i()},i=function(){$("#mb_box").css({width:"100%",height:"100%",zIndex:"99999",position:"fixed",filter:"Alpha(opacity=60)",backgroundColor:"rgba(10%,20%,30%,0.6)",top:"0",left:"0",opacity:"0.6"}),$("#mb_con").css({zIndex:"999999",width:"355px",height:"189px",position:"fixed",backgroundColor:"White",borderRadius:"",border:"1px solid #fff"}),$("#mb_tit").css({display:"block",fontSize:"16px",color:"#444",padding:"2px 15px",backgroundColor:"#00aeef",borderRadius:"",borderBottom:"",fontWeight:"normal",fontFamily:"microsoft yahei"}),$("#mb_msg").css({height:"60px",lineHeight:"125px",fontSize:"13px",textAlign:"center",fontSize:"16px",fontFamily:"microsoft yahei"}),$("#mb_msg p").css({height:"30px",lineHeight:"30px",width:"350px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),$("#mb_btnbox").css({margin:"75px 0 0",textAlign:"center",background:"#00aeef",paddingTop:"1px"}),$("#mb_btn_ok,#mb_jug_ok,#mb_btn_no").css({width:"60px",height:"28px",color:"#000",border:"1px solid #fff",borderRadius:"3px",background:"#00aeef",fontSize:"14px",fontFamily:"microsoft yahei"}),$("#mb_btn_ok,#mb_jug_ok").css({backgroundColor:"#00aeef"}),$("#mb_btn_no").css({backgroundColor:"#00aeef",marginLeft:"20px"}),$("#mb_ico").hover(function(){$(this).css({backgroundColor:"Red",color:"White"})},function(){$(this).css({backgroundColor:"#DDD",color:"black"})});var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=$("#mb_con").width(),a=$("#mb_con").height();$("#mb_con").css({top:(t-a)/2+"px",left:(e-n)/2+"px"})},s=function(e){$("#mb_btn_ok").click(function(){$("#mb_box,#mb_con").remove(),"function"==typeof e&&e()})},o=function(e){$("#mb_jug_ok").click(function(){$("#mb_box,#mb_con").remove(),"function"==typeof e&&e()})},r=function(){$("#mb_btn_no,#mb_ico").click(function(){$("#mb_box,#mb_con").remove()})}}(),window.localStorage){var storage=window.localStorage,inow=Date.now(),schedule_provinceANDcityStr=storage.getItem("schedule_provinceANDcity");if(null==schedule_provinceANDcityStr)getprovinceANDcityJSON();else if(eouluGlobal.S_getPageAllConfig().Schedule.provinceANDcityRefreshFlag)getprovinceANDcityJSON();else{var iexpires=JSON.parse(schedule_provinceANDcityStr).expires;iexpires<inow?getprovinceANDcityJSON():schedule_provinceANDcity=JSON.parse(schedule_provinceANDcityStr).data}}else alert("浏览器不支持localstorage");function getprovinceANDcityJSON(){jQuery.getJSON("html/modules/serviced/provinceANDcity.json",void 0,function(e,t,n){if("success"==t){var a={};a.expires=inow+2592e6,a.data=_.cloneDeep(e),console.log("iObj.data"),console.log(a.data),schedule_provinceANDcity=_.cloneDeep(e);var i=JSON.stringify(a);storage.setItem("schedule_provinceANDcity",i)}else $.MsgBox_Unload.Alert("提示","获取中国省市数据失败！")})}function searchCity(t){if(null!==ScheduleState.provinceANDcityStr)return _.find(ScheduleState.provinceANDcityStr,function(e){return e.value==t})}var ScheduleState=new Object;function addupdateAwesomplete(e,t){if(null===ScheduleState.provinceANDcityStr){var s=[];schedule_provinceANDcity.provinces.map(function(i,e,t){i.citys.map(function(e,t,n){var a={};a.label=i.provinceName+","+e.citysName,a.value=e.citysName,s.push(a)})}),ScheduleState.provinceANDcityStr=_.cloneDeep(s)}"add"==e?ScheduleState.addprovinceANDcityFlag||(t.each(function(e,t){new Awesomplete(t,{list:ScheduleState.provinceANDcityStr,minChars:1,maxItems:20,autoFirst:!0})}),ScheduleState.addprovinceANDcityFlag=!0):"update"==e&&(ScheduleState.updateprovinceANDcityFlag||(t.each(function(e,t){new Awesomplete(t,{list:ScheduleState.provinceANDcityStr,minChars:1,maxItems:20,autoFirst:!0})}),ScheduleState.updateprovinceANDcityFlag=!0))}function alterDistance(e,t,u){var n="https://api.map.baidu.com/geocoder/v2/?ak=ZHnpqUp55qaTvkE27KGjUBYLcUfsaRTV&output=json&address="+encodeURIComponent(e),a="https://api.map.baidu.com/geocoder/v2/?ak=ZHnpqUp55qaTvkE27KGjUBYLcUfsaRTV&output=json&address="+encodeURIComponent(t);$.ajax({type:"POST",url:n,dataType:"JSONP",success:function(e){if(0==parseInt(e.status)){var r=e.result.location.lng,l=e.result.location.lat;console.log("lng1:"+r),console.log("lat1:"+l),$.ajax({type:"POST",url:a,dataType:"JSONP",success:function(e){if(0==parseInt(e.status)){var t=e.result.location.lng,n=e.result.location.lat;console.log("lng2:"+t),console.log("lat2:"+n);var a=new BMap.Map,i=new BMap.Point(r,l),s=new BMap.Point(t,n),o=(a.getDistance(i,s)/1e3).toFixed(2);console.warn(o),u&&u(o)}else alert("第三方库计算距离失败！")}})}}})}function AddContract(){addupdateAwesomplete("add",$("#add_info_Departure, #add_info_Destination")),$("[id^='add_info_']").each(function(){return!(!$(this).is("#add_info_Name")&&!$(this).is("#add_info_TrafficExpense"))||($(this).is("#add_info_TransportTool")?($(this).val("请选择"),!0):$(this).is("#add_info_HotelExpense")?($(this).val("请选择住宿费用"),!0):void $(this).val(""))}),$("#add_info_TransportTool").trigger("change"),$(".MailBar_cover_color, .contract_add").slideDown(200)}function INSearch(){var e=$(".classify").find("option:selected").text();if("员工姓名"==e){var t=$("select.staffName").find("option:selected").attr("value");t=Trim(t)}else{t=$("#searchContent1").val();t=Trim(t)}""!=t?window.location.href="ScheduleRoute?classify="+e+"&parameter="+t:$.MsgBox_Unload.Alert("提示","搜索内容不为空！")}function Cancel(){$("#search").val("cancel"),$('input[name="Name"]').val(""),$("#top_text_from").attr("action","Schedule?Date="+currentDate),$("#top_text_from").submit()}function SelectContent(){for(var e=$("span.engineer").html().split(","),t=e.length,n="",a="",i=1;i<t-1;i++)n+='<option value="'+e[i].substring(12,e[i].length-1)+'">'+e[i].substring(12,e[i].length-1)+"</option>";a+='<option value="'+e[t-1].substring(12,e[t-1].length-2)+'">'+e[t-1].substring(12,e[t-1].length-2)+"</option>",Str='<select class="staffName" ><option value="所有人">所有人</option>'+n+a+"</select>",$(".select1").html("").html(Str)}ScheduleState.addSubmitObj=new Object,ScheduleState.addSubmitObj.Name=null,ScheduleState.addSubmitObj.CustomerUnit=null,ScheduleState.addSubmitObj.ServiceItem=null,ScheduleState.addSubmitObj.TransportTool=null,ScheduleState.addSubmitObj.TrainNumber=null,ScheduleState.addSubmitObj.Hotel=null,ScheduleState.addSubmitObj.OperateType=null,ScheduleState.addSubmitObj.Departure=null,ScheduleState.addSubmitObj.Destination=null,ScheduleState.addSubmitObj.DepartureDate=null,ScheduleState.addSubmitObj.DestinationDate=null,ScheduleState.addSubmitObj.HotelExpense=null,ScheduleState.addSubmitObj.TrafficExpense=null,ScheduleState.addSubmitObj.TravelDistance=null,ScheduleState.addSubmitObj.Date=null,ScheduleState.updateSubmitObj=new Object,ScheduleState.updateSubmitObj.ID=null,ScheduleState.updateSubmitObj.Name=null,ScheduleState.updateSubmitObj.CustomerUnit=null,ScheduleState.updateSubmitObj.ServiceItem=null,ScheduleState.updateSubmitObj.TransportTool=null,ScheduleState.updateSubmitObj.TrainNumber=null,ScheduleState.updateSubmitObj.Hotel=null,ScheduleState.updateSubmitObj.OperateType=null,ScheduleState.updateSubmitObj.Departure=null,ScheduleState.updateSubmitObj.Destination=null,ScheduleState.updateSubmitObj.DepartureDate=null,ScheduleState.updateSubmitObj.DestinationDate=null,ScheduleState.updateSubmitObj.HotelExpense=null,ScheduleState.updateSubmitObj.TrafficExpense=null,ScheduleState.updateSubmitObj.TravelDistance=null,ScheduleState.updateSubmitObj.Date=null,ScheduleState.provinceANDcityStr=null,ScheduleState.addprovinceANDcityFlag=!1,ScheduleState.updateprovinceANDcityFlag=!1,$(document).on("click","#add_submit",function(){var n=$(this);for(var e in ScheduleState.addSubmitObj)"OperateType"!=e?"Date"!=e?"TravelDistance"!=e&&(ScheduleState.addSubmitObj[e]=$("#add_info_"+e).val()):ScheduleState.addSubmitObj[e]=currentDate:ScheduleState.addSubmitObj[e]="Add";var t=new RegExp("[0-9]{2}:[0-9]{2}");for(var a in ScheduleState.addSubmitObj){if(ScheduleState.addSubmitObj[a]=globalDataHandle(ScheduleState.addSubmitObj[a],"").trim(),"CustomerUnit"==a&&""==ScheduleState.addSubmitObj[a])return $.MsgBox_Unload.Alert("提示","客户单位必填！"),!1;if("HotelExpense"==a&&(""==ScheduleState.addSubmitObj[a]||"请选择住宿费用"==ScheduleState.addSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","未选择住宿费用！"),!1;if("TrafficExpense"==a&&(""==ScheduleState.addSubmitObj[a]||"请选择交通方式"==ScheduleState.addSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","未选择交通费用！"),!1;if("Departure"==a&&""==ScheduleState.addSubmitObj[a])return $.MsgBox_Unload.Alert("提示","未选择出发地！"),!1;if("Destination"==a&&""==ScheduleState.addSubmitObj[a])return $.MsgBox_Unload.Alert("提示","未选择目的地！"),!1;if("DepartureDate"==a&&""!=ScheduleState.addSubmitObj[a]&&!t.test(ScheduleState.addSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","出发时间格式错误！"),!1;if("DestinationDate"==a&&""!=ScheduleState.addSubmitObj[a]&&!t.test(ScheduleState.addSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","到达时间格式错误！"),!1}null==searchCity(ScheduleState.addSubmitObj.Departure)||null==searchCity(ScheduleState.addSubmitObj.Destination)?$.MsgBox_Unload.Confirm("出发地&目的地异常提示","无法计算距离，继续提交吗？",function(){eouluGlobal.C_btnDisabled(n,!1),ScheduleState.addSubmitObj.TravelDistance="0.00",$.ajax({type:"get",url:"ScheduleOperate",data:ScheduleState.addSubmitObj,dataType:"json",success:function(e){1==e?($.MsgBox.Alert("提示","添加成功"),$(".MailBar_cover_color, .contract_add").hide()):$.MsgBox_Unload.Alert("提示","添加失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")},complete:function(e,t){eouluGlobal.C_btnAbled(n,!1)}})}):alterDistance(ScheduleState.addSubmitObj.Departure,ScheduleState.addSubmitObj.Destination,function(e){eouluGlobal.C_btnDisabled(n,!1),ScheduleState.addSubmitObj.TravelDistance=e<20?20:e,$.ajax({type:"get",url:"ScheduleOperate",data:ScheduleState.addSubmitObj,dataType:"json",success:function(e){1==e?($.MsgBox.Alert("提示","添加成功"),$(".MailBar_cover_color, .contract_add").hide()):$.MsgBox_Unload.Alert("提示","添加失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")},complete:function(e,t){eouluGlobal.C_btnAbled(n,!1)}})})}),$(document).on("click",".xiugai",function(){addupdateAwesomplete("update",$("#update_info_Departure, #update_info_Destination")),$(this).css("color","red");var n=$(this).parent();$("[id^='update_info_']").each(function(){if($(this).is("#update_info_TrafficExpense"))return!0;var e=$(this).attr("id").replace("update_info_","td_"),t=globalDataHandle(n.find("."+e).text(),"");$(this).val(t)}),$("#update_info_TransportTool").trigger("change"),$("#update_info_TrafficExpense").val(globalDataHandle(n.find(".td_TrafficExpense").text(),""));var e=n.find(".DateTime").text(),t=$("#update_submit");e>moment().subtract(1,"months").format("YYYY-MM-DD")?(eouluGlobal.C_btnAbled(t,!1),t.children("span.glyphicon").css("cursor","pointer")):(eouluGlobal.C_btnDisabled(t,!1),t.children("span.glyphicon").css("cursor","not-allowed")),ScheduleState.updateSubmitObj.ID=$(this).attr("value"),$(".MailBar_cover_color, .contract_update").slideDown(200)}),$("#update_submit").click(function(){var n=$(this);for(var e in ScheduleState.updateSubmitObj)"OperateType"!=e?"Date"!=e?"TravelDistance"!=e&&"ID"!=e&&(ScheduleState.updateSubmitObj[e]=$("#update_info_"+e).val()):ScheduleState.updateSubmitObj[e]=currentDate:ScheduleState.updateSubmitObj[e]="Modify";var t=new RegExp("[0-9]{2}:[0-9]{2}");for(var a in ScheduleState.updateSubmitObj){if(ScheduleState.updateSubmitObj[a]=globalDataHandle(ScheduleState.updateSubmitObj[a],"").trim(),"CustomerUnit"==a&&""==ScheduleState.updateSubmitObj[a])return $.MsgBox_Unload.Alert("提示","客户单位必填！"),!1;if("HotelExpense"==a&&(""==ScheduleState.updateSubmitObj[a]||"请选择住宿费用"==ScheduleState.updateSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","未选择住宿费用！"),!1;if("TrafficExpense"==a&&(""==ScheduleState.updateSubmitObj[a]||"请选择交通方式"==ScheduleState.updateSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","未选择交通费用！"),!1;if("Departure"==a&&""==ScheduleState.updateSubmitObj[a])return $.MsgBox_Unload.Alert("提示","未选择出发地！"),!1;if("Destination"==a&&""==ScheduleState.updateSubmitObj[a])return $.MsgBox_Unload.Alert("提示","未选择目的地！"),!1;if("DepartureDate"==a&&""!=ScheduleState.updateSubmitObj[a]&&!t.test(ScheduleState.updateSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","出发时间格式错误！"),!1;if("DestinationDate"==a&&""!=ScheduleState.updateSubmitObj[a]&&!t.test(ScheduleState.updateSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","到达时间格式错误！"),!1}null==searchCity(ScheduleState.updateSubmitObj.Departure)||null==searchCity(ScheduleState.updateSubmitObj.Destination)?$.MsgBox_Unload.Confirm("出发地&目的地异常提示","无法计算距离，继续提交吗？",function(){eouluGlobal.C_btnDisabled(n,!1),ScheduleState.updateSubmitObj.TravelDistance="0.00",$.ajax({type:"get",url:"ScheduleOperate",data:ScheduleState.updateSubmitObj,dataType:"json",success:function(e){1==e?($.MsgBox.Alert("提示","修改成功"),$(".MailBar_cover_color, .contract_update").hide()):$.MsgBox_Unload.Alert("提示","修改失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")},complete:function(e,t){eouluGlobal.C_btnAbled(n,!1)}})}):alterDistance(ScheduleState.updateSubmitObj.Departure,ScheduleState.updateSubmitObj.Destination,function(e){eouluGlobal.C_btnDisabled(n,!1),ScheduleState.updateSubmitObj.TravelDistance=e<20?20:e,$.ajax({type:"get",url:"ScheduleOperate",data:ScheduleState.updateSubmitObj,dataType:"json",success:function(e){1==e?($.MsgBox.Alert("提示","修改成功"),$(".MailBar_cover_color, .contract_update").hide()):$.MsgBox_Unload.Alert("提示","修改失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")},complete:function(e,t){eouluGlobal.C_btnAbled(n,!1)}})})}),$(document).on("click","#mb_btn_ok",function(){window.location.reload()}),$("#add_cancel").click(function(){for(var e in $(".MailBar_cover_color, .contract_add").slideUp(200),ScheduleState.addSubmitObj)ScheduleState.addSubmitObj[e]=null}),$("#update_cancel").click(function(){for(var e in $(".MailBar_cover_color, .contract_update").slideUp(200),ScheduleState.updateSubmitObj)ScheduleState.updateSubmitObj[e]=null}),$(".backToday").click(function(){window.location.href="Schedule"}),$(".deleteInfo").click(function(){"删除"==$(".deleteInfo").val()?($(".deleteInfo").val("").val("取消删除"),$(".deleteInfo").css("width","70px"),$("#table1 .tbody_tr td.xiugai").removeClass("xiugai").addClass("delete"),$("#table1  td.xiugai1").eq(0).text("删除"),$("#table1 .tbody_tr td.delete").text("X"),$(".tbody_tr td.delete").click(function(){var t=$(this).parent(),e=t.find("td.delete").attr("value"),n=t.find("td.Name").text(),a=t.find(".DateTime").text(),i=new Date(Date.parse(a.replace(/-/g,"/"))),s=new Date,o=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),r=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate();console.log(o),console.log(r),console.log(s<i),console.log(i==s),$.ajax({type:"get",url:"ScheduleOperate",data:{OperateType:"Delete",ID:e,Name:n},success:function(e){console.log(e),e?($.MsgBox_Unload.Alert("提示","删除成功！"),t.remove()):$.MsgBox_Unload.Alert("提示","删除失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")}})})):window.location.reload()}),$(function(){var e=window.location.href,t=e.indexOf("?"),n=e.indexOf("Schedule?Date");if(-1==t||-1!=n)SelectContent();else{var a=e.substring(t+1),i=decodeURI(a),s=i.indexOf("&"),o=i.substring(9,s),r=i.substring(s+1).indexOf("&"),l=i.substring(s+1),u=l.indexOf("=");if(-1==r){var d=l.substring(u+1);d=Trim(d)}else{d=l.substring(u+1,r);d=Trim(d)}if("员工姓名"!=o)$(".classify").find('option[value="'+o+'"]').attr("selected",!0),$(".select1").html("").html('<input type="text" id="searchContent1" name="parameter" value="'+d+'" style="width:80%;height:29px;border:1px solid darkgrey;border-left:none;float:left;">');else{SelectContent();for(var c=0;c<$("select.staffName").find("option").length;c++){var h=$("select.staffName").find("option").eq(c).attr("value");Trim(h)==d&&$("select.staffName").find('option[value="'+h+'"]').attr("selected",!0)}}}}),$(".classify").change(function(e){"员工姓名"==$(".classify").val()?SelectContent():$(".select1").html("").html('<input type="text" id="searchContent1" name="parameter"  style="width:80%;height:29px;border:1px solid darkgrey;border-left:none;float:left;">')}),$(function(){$(".info-rili i").click(function(){$(this).parent().find("input").click()});var e={startDate:moment(new Date(Date.parse((new Date).getFullYear()+"-01-01"))),endDate:moment(new Date),maxDate:moment(new Date),opens:"left",ranges:{"今天":[moment(),moment()],"昨天":[moment().subtract(1,"days"),moment().subtract(1,"days")],"上周":[moment().subtract(6,"days"),moment()],"前30天":[moment().subtract(29,"days"),moment()],"本月":[moment().startOf("month"),moment().endOf("month")],"上月":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},showWeekNumbers:!0,alwaysShowCalendars:!0,locale:{format:"YYYY-MM-DD",applyLabel:"确定",cancelLabel:"取消",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}};$("#config-demo").daterangepicker(e,function(e,t,n){timeRangeChange=[e.format("YYYY-MM-DD HH:mm:ss"),t.format("YYYY-MM-DD HH:mm:ss")],console.log(timeRangeChange)});var n={"飞机":_.range(0,4200,200),"铁路":_.range(0,2050,50),"自驾":_.range(0,3050,50),"打车":_.range(0,1050,50),"其他":_.range(0,2010,10)};$(document).on("change","select[name='TransportTool_sel']",function(){var e;$(this).is("#add_info_TransportTool")?e=$("#add_info_TrafficExpense"):$(this).is("#update_info_TransportTool")&&(e=$("#update_info_TrafficExpense"));var t=$(this).val(),a="";"请选择"==t||null==t?a="<option value='请选择交通方式'>请选择交通方式</option>":n[t].map(function(e,t,n){a+="<option value="+e+">"+e+"元</option>"}),e.empty().append(a)})});var schedule_startTime,schedule_endTime,k4=new Kalendae.Input("week_sel",{months:1,mode:"week",format:"YYYY-MM-DD",rangeDelimiter:"至",side:"bottom",disableDate:!0,selected:Kalendae.moment(),subscribe:{change:function(e){$(".k-btn-close").trigger("click")}}});function switchDate(){if("dateRange"==$("input[name='date_sel']:checked").val()){var e=$(".calendar.left .input-mini").val(),t=$(".calendar.right .input-mini").val();if(schedule_startTime=""==e||null==e?(new Date).getFullYear()+"-01-01":e,""==t||null==t){var n=new Date,a=n.getFullYear(),i=n.getMonth()+1;i<10&&(i="0"+i);var s=n.getDate();s<10&&(s="0"+s),schedule_endTime=a+"-"+i+"-"+s}else schedule_endTime=t}else if("dateWeek"==$("input[name='date_sel']:checked").val())if(-1<$("#week_sel").val().indexOf("至"))schedule_startTime=$("#week_sel").val().split("至")[0],schedule_endTime=$("#week_sel").val().split("至")[1];else if(-1==$("#week_sel").val().indexOf("至")){schedule_startTime=$("#week_sel").val().trim();var o=new Date,r=o.getFullYear(),l=o.getMonth()+1;l<10&&(l="0"+l);var u=o.getDate();u<10&&(u="0"+u),schedule_endTime=r+"-"+l+"-"+u}}$(document).on("change","input[name='date_sel']",function(){"dateWeek"==$("input[name='date_sel']:checked").val()?($(".dateRange_div").css({display:"none"}),$(".dateWeek_div").css({display:"inline-block"})):"dateRange"==$("input[name='date_sel']:checked").val()&&($(".dateWeek_div").css({display:"none"}),$(".dateRange_div").css({display:"inline-block"}))}),$(function(){$(".tbody_tr").length&&$(".tbody_tr").each(function(){var e=$(this).find(".showTripCost1").text(),t=$(this).find(".showTripCost2").text();""!=e&&"--"!=e&&null!=e&&null!=e||(e=0),""!=t&&"--"!=t&&null!=t&&null!=t||(t=0),$(this).find(".showTripCost").text(1*e+1*t)})});var myChart1,myChart2,myChart3,myChart4,myChart5,cruurntCardIndex,city={"北京":["东城区","西城区","崇文区","宣武区","朝阳区","海淀区","丰台区","石景山区","房山区","通州区","顺义区","昌平区","大兴区","怀柔区","平谷区","门头沟区","密云县","延庆县"],"天津":["和平区","河东区","河西区","南开区","河北区","红桥区","东丽区","西青区","北辰区","津南区","武清区","宝坻区","滨海新区","静海县","宁河县","蓟县"],"上海":["黄浦区","卢湾区","徐汇区","长宁区","静安区","普陀区","闸北区","虹口区","杨浦区","闵行区","宝山区","嘉定区","浦东新区","金山区","松江区","青浦区","奉贤区","崇明县"],"重庆":["渝中区","大渡口区","江北区","南岸区","北碚区","渝北区","巴南区","长寿区","双桥区","沙坪坝区","万盛区","万州区","涪陵区","黔江区","永川区","合川区","江津区","九龙坡区","南川区","綦江县","潼南县","荣昌县","璧山县","大足县","铜梁县","梁平县","开县","忠县","城口县","垫江县","武隆县","丰都县","奉节县","云阳县","巫溪县","巫山县"],"河北":["石家庄","唐山","秦皇岛","邯郸","邢台","保定","张家口","承德","沧州","廊坊","衡水"],"山西":["太原","大同","阳泉","长治","晋城","朔州","晋中","运城","忻州","临汾","吕梁"],"辽宁":["沈阳","大连","鞍山","抚顺","本溪","丹东","锦州","营口","阜新","辽阳","盘锦","铁岭","朝阳","葫芦岛"],"吉林":["长春","吉林","四平","辽源","通化","白山","松原","白城","延边朝鲜族自治州"],"黑龙江":["哈尔滨","齐齐哈尔","鹤岗","双鸭山","鸡西","大庆","伊春","牡丹江","佳木斯","七台河","黑河","绥化","大兴安岭"],"江苏":["南京","苏州","无锡","常州","镇江","南通","泰州","扬州","盐城","连云港","徐州","淮安","宿迁"],"浙江":["杭州","宁波","温州","嘉兴","湖州","绍兴","金华","衢州","舟山","台州","丽水"],"安徽":["合肥","芜湖","蚌埠","淮南","马鞍山","淮北","铜陵","安庆","黄山","滁州","阜阳","宿州","巢湖","六安","亳州","池州","宣城"],"福建":["福州","厦门","莆田","三明","泉州","漳州","南平","龙岩","宁德"],"江西":["南昌","景德镇","萍乡","九江","新余","鹰潭","赣州","吉安","宜春","抚州","上饶"],"山东":["济南","青岛","淄博","枣庄","东营","烟台","潍坊","济宁","泰安","威海","日照","莱芜","临沂","德州","聊城","滨州","菏泽"],"河南":["郑州","开封","洛阳","平顶山","安阳","鹤壁","新乡","焦作","濮阳","许昌","漯河","三门峡","南阳","商丘","信阳","周口","驻马店"],"湖北":["武汉","黄石","十堰","荆州","宜昌","襄樊","鄂州","荆门","孝感","黄冈","咸宁","随州","恩施"],"湖南":["长沙","株洲","湘潭","衡阳","邵阳","岳阳","常德","张家界","益阳","郴州","永州","怀化","娄底","湘西"],"广东":["广州","深圳","珠海","汕头","韶关","佛山","江门","湛江","茂名","肇庆","惠州","梅州","汕尾","河源","阳江","清远","东莞","中山","潮州","揭阳","云浮"],"海南":["海口","三亚"],"四川":["成都","自贡","攀枝花","泸州","德阳","绵阳","广元","遂宁","内江","乐山","南充","眉山","宜宾","广安","达州","雅安","巴中","资阳","阿坝","甘孜","凉山"],"贵州":["贵阳","六盘水","遵义","安顺","铜仁","毕节","黔西南","黔东南","黔南"],"云南":["昆明","曲靖","玉溪","保山","昭通","丽江","普洱","临沧","德宏","怒江","迪庆","大理","楚雄","红河","文山","西双版纳","腾冲"],"陕西":["西安","铜川","宝鸡","咸阳","渭南","延安","汉中","榆林","安康","商洛"],"甘肃":["兰州","嘉峪关","金昌","白银","天水","武威","酒泉","张掖","庆阳","平凉","定西","陇南","临夏","甘南"],"青海":["西宁","海东","海北","海南","黄南","果洛","玉树","海西"],"内蒙古":["呼和浩特","包头","乌海","赤峰","通辽","鄂尔多斯","呼伦贝尔","巴彦淖尔","乌兰察布","锡林郭勒盟","兴安盟","阿拉善盟"],"广西":["南宁","柳州","桂林","梧州","北海","防城港","钦州","贵港","玉林","百色","贺州","河池","来宾","崇左"],"西藏":["拉萨","那曲","昌都","林芝","山南","日喀则","阿里"],"宁夏":["银川","石嘴山","吴忠","固原","中卫"],"新疆":["乌鲁木齐","克拉玛依","吐鲁番","哈密","和田","阿克苏","喀什","克孜勒苏","巴音郭楞","昌吉","博尔塔拉","伊犁","塔城","阿勒泰"],"香港":["香港岛","九龙东","九龙西","新界东","新界西"],"澳门":["澳门半岛","离岛"],"台湾":["台北","高雄","基隆","新竹","台中","嘉义","台南"],"加拿大温哥华":["加拿大温哥华"]};function province(e){for(var t in city)if(-1<city[t].indexOf(e))return t}function showMap(e,t){$.ajax({type:"get",url:"ScheduleProvince",data:{StartTime:e,EndTime:t,Name:""},success:function(e){console.log("出差省份分布"),console.log(e),console.log(typeof e),e=JSON.parse(e),console.log(e),console.log(typeof e);var t=[],n=[];if(1<e.length){for(var a=1;a<e.length-1;a++)""!=e[a].province&&"--"!=e[a].province&&t.push(e[a].province),""!=e[a].times&&"--"!=e[a].times&&n.push(Number(e[a].times));console.log(t),console.log(n),$(".mapContent").html("");$(".mapContent").append('<div id="main"></div>'),provMap(t,n)}else $.MsgBox_Unload.Alert("提示","该时间段无出差省份记录")},error:function(){alert("网络错误")}})}function provMap(e,t){for(var n=[],a=0;a<e.length;a++){var i={};-1<e[a].indexOf("内蒙古")?i.name="内蒙古":-1<e[a].indexOf("自治区")?i.name=e[a].substring(0,2):i.name=e[a].substring(0,e[a].length-1),i.value=t[a],n.push(i)}console.log("出差统计分布，去除后缀的省"),console.log(n),console.log(typeof n),myChart1=echarts.init(document.getElementById("main"));echarts.config,zrender.tool.event;!function(e){myChart1=e.init(document.getElementById("main")),console.log("基于准备好的dom，初始化echarts图表"),console.log(n);var t={tooltip:{trigger:"item",formatter:"{b}"},series:[{name:"中国",type:"map",mapType:"china",roam:!1,selectedMode:"multiple",itemStyle:{normal:{label:{show:!0}},emphasis:{label:{show:!0}}},data:n}],dataRange:{x:"left",y:"bottom",splitList:[{start:300},{start:150,end:300},{start:50,end:150},{start:1,end:50},{end:1}],color:["#c00000","#ff0000","#ff9600","#ffff00","#fff"]}};myChart1.setOption(t)}(echarts)}function showRangeTimeMap(){showMap(schedule_startTime,schedule_endTime)}function ajaxDistanceStatistics(e,t){return $.ajax({type:"get",url:"DistanceStatistics",dataType:"json",data:{startTime:e,endTime:t},success:function(e){console.log("这里是距离统计"),console.log(e),console.log(typeof e);var t=[],n=[];if(1<e.length){for(var a=1;a<e.length;a++){t.push(e[a].Name),""!=e[a].SumDistance&&"--"!=e[a].SumDistance&&null!=e[a].SumDistance||(e[a].SumDistance=0);var i=(1*e[a].SumDistance).toFixed(0);n.push(i)}console.log("最新的"),console.log(t),console.log(n),$(".trip-distance-body").html("");$(".trip-distance-body").append('<div id="main3"></div>'),MapDistanceStatistics(t,n)}else $.MsgBox_Unload.Alert("提示","该时间段无距离统计记录")},error:function(){$.MsgBox.Alert("提示","网络繁忙，请重新加载")}})}function showDistanceStatistics(){ajaxDistanceStatistics(schedule_startTime,schedule_endTime)}function MapDistanceStatistics(e,t){var n={title:{text:"单位：km",textStyle:{color:"#999",fontSize:14}},tooltip:{trigger:"axis"},legend:{data:["",""]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:e,axisLabel:{interval:0,rotate:0,textStyle:{color:"rgba(0,0,0,0.9)",fontSize:14},fontFamily:"微软雅黑, 宋体, Arial, Verdana, sans-serif",formatter:function(e){var t="",n=e.length,a=Math.ceil(n/1);if(1<a){for(var i=0;i<a;i++){var s=1*i,o=s+1;t+=e.substring(s,o)+"\n"}return t}return e}},splitLine:{show:!1}}],yAxis:[{type:"value"}],series:[{name:"距离",type:"bar",data:t,markPoint:{data:[]},markLine:{data:[]},itemStyle:{normal:{color:function(e){var t=["#EE4775","#E3497F","#DD4B84","#D04B84","#CA4D91","#C04D91","#BF4E9A","#B84FA0","#B04FA0","#AA51AA","#A051AA","#9353BB","#8754C3","#8054C3","#7E56CA","#7056CA","#6F58D7","#685AE1","#605AE1","#5B5BE6","#505BE6","#4F5CF2","#4A5CF2","#455CF2","#405CA2","#3B5CA2","#305CA2"];return t[e.dataIndex%t.length]},barBorderRadius:4,label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:10},formatter:function(e){return 0==e.value?"":e.value}}},emphasis:{barBorderRadius:7}}}]};(myChart2=echarts.init(document.getElementById("main3"))).setOption(n)}function barGraphAjax(e,t,o){return $.ajax({type:"get",url:"ScheduleByTime",dataType:"json",data:{StartTime:e,EndTime:t,Name:o},success:function(e){console.log("#员工按姓名出差原始数据"),console.log(e),console.log(typeof e),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n});var t=[],n=[];if(Object.keys(e).length){for(var a in e)if(""==a&&delete e[a],0!=e[a]&&""!=e[a]||delete e[a],a.lastIndexOf("市")==a.length-1&&-1!=a.lastIndexOf("市")){province(s=a.substring(0,a.length-1))||"北京"==s||"上海"==s||"重庆"==s||"天津"==s||"香港"==s||"澳门"==s||delete e[a];var i=s+"市"}else{province(s=a)||"北京"==s||"上海"==s||"重庆"==s||"天津"==s||"香港"==s||"澳门"==s||delete e[a];i=s}for(var a in console.log("最终输出的城市数组"),console.log(e),e){if(a.lastIndexOf("市")==a.length-1&&-1!=a.lastIndexOf("市"))province(s=a.substring(0,a.length-1)),i=s+"市";else{var s;province(s=a),i=s}t.push(s),n.push(e[i])}console.log("@员工按姓名出差城市分布，处理后的数据"),console.log(t),console.log(n),$(".trip-city-body").html("");$(".trip-city-body").append('<div id="main2"></div>'),BarMap(o,t,n)}else BarMap(o,["苏州"],["0"]),$.MsgBox_Unload.Alert("提示","该员工此时间段无出差记录")},error:function(){console.log("***员工出差城市次数统计获取失败了***")}})}function BarMap(e,t,n){var a;myChart3=echarts.init(document.getElementById("main2")),a={title:{text:"单位：次数",subtext:e,textStyle:{color:"#999",fontSize:14}},tooltip:{trigger:"axis"},legend:{data:["",""]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:t,axisLabel:{interval:0,rotate:0,textStyle:{color:"rgba(0,0,0,0.9)",fontSize:14},fontFamily:"微软雅黑, 宋体, Arial, Verdana, sans-serif",formatter:function(e){return e.split("").join("\n")}},splitLine:{show:!1}}],yAxis:[{type:"value"}],series:[{name:"次数",type:"bar",data:n,markPoint:{data:[]},markLine:{data:[]},itemStyle:{normal:{color:function(e){var t=["#EE4775","#E3497F","#DD4B84","#D04B84","#CA4D91","#C04D91","#BF4E9A","#B84FA0","#B04FA0","#AA51AA","#A051AA","#9353BB","#8754C3","#8054C3","#7E56CA","#7056CA","#6F58D7","#685AE1","#605AE1","#5B5BE6","#505BE6","#4F5CF2","#4A5CF2","#455CF2","#405CF2","#3B5CA2","#305CA2"];return t[e.dataIndex%t.length]},barBorderRadius:5,label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:10},formatter:function(e){return 0==e.value?"":e.value}}}}}]},myChart3.setOption(a)}function showTripCity(){var e=$(".trip-city-tit-right .staffName").val();"所有人"==e&&(e=""),$(".trip-city-tit-left span").text(e),barGraphAjax(schedule_startTime,schedule_endTime,e)}function echartsStaffTripTimes(e,t){var n={title:{text:"单位：次数",textStyle:{color:"#999",fontSize:14}},tooltip:{trigger:"axis"},legend:{data:["",""]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:e,axisLabel:{interval:0,rotate:0,textStyle:{color:"rgba(0,0,0,0.9)",fontFamily:"微软雅黑, 宋体, Arial, Verdana, sans-serif",fontSize:14},formatter:function(e){return e.split("").join("\n")}},splitLine:{show:!1}}],yAxis:[{type:"value"}],series:[{name:"次数",type:"bar",data:t,markPoint:{data:[]},markLine:{data:[]},itemStyle:{normal:{color:function(e){var t=["#EE4775","#E3497F","#DD4B84","#D04B84","#CA4D91","#C04D91","#BF4E9A","#B84FA0","#B04FA0","#AA51AA","#A051AA","#9353BB","#8754C3","#8054C3","#7E56CA","#7056CA","#6F58D7","#685AE1","#605AE1","#5B5BE6","#505BE6","#4F5CF2","#4A5CF2","#455CF2","#405CF2","#3B5CA2","#305CA2"];return t[e.dataIndex%t.length]},barBorderRadius:5,label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:10},formatter:function(e){return 0==e.value?"":e.value}}}}}]};(myChart4=echarts.init(document.getElementById("echartContainer1"))).setOption(n)}function StaffTripTimesAjax(e,t){return $.ajax({type:"get",url:"FrequenceStatistics",dataType:"json",data:{startTime:e,endTime:t},success:function(e){console.log("@@@员工出差次数排行"),console.log(typeof e),console.log(e);var t=[],n=[];if(1<e.length){for(var a=1;a<e.length;a++)null!=e[a].Name&&""!=e[a].Name&&t.push(e[a].Name),null!=e[a].times&&""!=e[a].times&&n.push(Number(e[a].times));if(t.length!=n.length)$.MsgBox.Alert("提示","网络异常，请重新加载");else{console.log("员工出差次数排行处理后数据"),console.log(t),console.log(n),$(".trip-staff-times-body").html("");$(".trip-staff-times-body").append('<div id="echartContainer1"></div>'),echartsStaffTripTimes(t,n)}}else $.MsgBox_Unload.Alert("提示","该时间段无出差次数排行")},error:function(){$.MsgBox_Unload.Alert("提示","网络出错，出差次数排行绘制失败")}})}function showStaffTripTimes(){StaffTripTimesAjax(schedule_startTime,schedule_endTime)}function echartsExpenseStatistics(e,t){var n={title:{text:"单位：元",textStyle:{color:"#999",fontSize:14}},tooltip:{trigger:"axis"},legend:{data:["",""]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:e,axisLabel:{interval:0,rotate:0,textStyle:{color:"rgba(0,0,0,0.9)",fontSize:14},fontFamily:"微软雅黑, 宋体, Arial, Verdana, sans-serif",formatter:function(e){return e.split("").join("\n")}},splitLine:{show:!1}}],yAxis:[{type:"value"}],series:[{name:"差旅费",type:"bar",data:t,markPoint:{data:[]},markLine:{data:[]},itemStyle:{normal:{color:function(e){var t=["#EE4775","#E3497F","#DD4B84","#D04B84","#CA4D91","#C04D91","#BF4E9A","#B84FA0","#B04FA0","#AA51AA","#A051AA","#9353BB","#8754C3","#8054C3","#7E56CA","#7056CA","#6F58D7","#685AE1","#605AE1","#5B5BE6","#505BE6","#4F5CF2","#4A5CF2","#455CF2","#405CF2","#3B5CA2","#305CA2"];return t[e.dataIndex%t.length]},barBorderRadius:5,label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:10},formatter:function(e){return 0==e.value?"":e.value}}}}}]};(myChart5=echarts.init(document.getElementById("echartContainer2"))).setOption(n)}function ExpenseStatisticsAjax(e,t){return $.ajax({type:"get",url:"ExpenseStatistics",dataType:"json",data:{startTime:e,endTime:t},success:function(e){console.log("#费用统计原始数据"),console.log(e),console.log(typeof e);var t=[],n=[];if(1<e.length){for(i=1;i<e.length;i++){var a=e[i].Destination,s=e[i].Expense;a.lastIndexOf("市")==a.length-1&&-1!=a.lastIndexOf("市")?a=a.substring(0,a.length-1):a.lastIndexOf("县")==a.length-1&&-1!=a.lastIndexOf("县")&&(a=a.substring(0,a.length-1)),a.lastIndexOf("市")==a.length-1&&-1!=a.lastIndexOf("市")?a=a.substring(0,a.length-1):a.lastIndexOf("县")==a.length-1&&-1!=a.lastIndexOf("县")&&(a=a.substring(0,a.length-1)),null!=s&&""!=s&&"--"!=s||(s="0"),t.push(a),n.push(s)}if(t.length!=n.length)$.MsgBox.Alert("提示","网络异常，请重新加载");else{console.log("差旅费用处理后数据"),console.log(t),console.log(n),$(".trip-cost-calc-body").html("");$(".trip-cost-calc-body").append('<div id="echartContainer2"></div>'),echartsExpenseStatistics(t,n)}}else echartsExpenseStatistics(["苏州市"],["0"]),$.MsgBox_Unload.Alert("提示","该时间段无费用数据")},error:function(){$.MsgBox_Unload.Alert("提示","网络出错，费用统计绘制失败")}})}function showExpenseStatistics(){ExpenseStatisticsAjax(schedule_startTime,schedule_endTime)}$(".changeBox .Domestic").click(function(){$(".changeBox").css("background-image","url(image/bg11.png)"),$(".bodyContent").css("height","705px");var e=$(".bodyContent").height()+190;$("body.nav-body").css("height",e+"px"),$(".reloadDiv").fadeOut(50),$(".BusinessTravel_timeBox").fadeOut(50),$(".mapBox").fadeOut(50),$(".trip-city").fadeOut(50),$(".trip-cost-calc").fadeOut(50),$(".trip-staff-times").fadeOut(50),$(".trip-distance").fadeOut(50),$(".trip-cost").fadeOut(50),$(".trip-people").fadeOut(50),$("#engineer-schedule-container").fadeIn(50)}),$(".changeBox .ExitOrEn").click(function(){cruurntCardIndex=2,$(".changeBox").css("background-image","url(image/bg22.png)"),$(".bodyContent").css("height","1640px");var e=$(".bodyContent").height()+190;$("body.nav-body").css("height",e+"px"),$("#engineer-schedule-container").hide(),$(".trip-staff-times").fadeOut(50),$(".trip-distance").fadeOut(50),$(".reloadDiv").fadeIn(50),$(".BusinessTravel_timeBox").fadeOut(50),$(".mapBox").fadeIn(50),$(".trip-city").fadeIn(50),$(".trip-cost-calc").fadeIn(50),$(".trip-cost").fadeOut(50),$(".trip-people").fadeOut(50);for(var t=$("span.engineer").html().split(","),n=t.length,a="",i="",s=1;s<n-1;s++)a+='<option value="'+t[s].substring(12,t[s].length-1)+'">'+t[s].substring(12,t[s].length-1)+"</option>";i+='<option value="'+t[n-1].substring(12,t[n-1].length-2)+'">'+t[n-1].substring(12,t[n-1].length-2)+"</option>",Str='<select class="staffName" style="width: 90%;height:27px;border-radius:5px;border:1px solid #999"><option value="所有人">所有人</option>'+a+i+"</select>",$(".trip-city-tit-right .staffName").remove(),$(".trip-city-tit-right").append(Str),switchDate(),showRangeTimeMap(),showTripCity(),showExpenseStatistics()}),$(".changeBox .staffData").on("click",function(){cruurntCardIndex=3,$(".changeBox").css("background-image","url(image/bg33.png)"),$(".bodyContent").css("height","1120px");var e=$(".bodyContent").height()+190;$("body.nav-body").css("height",e+"px"),$("#engineer-schedule-container").hide(),$(".mapBox").fadeOut(50),$(".trip-city").fadeOut(50),$(".trip-cost-calc").fadeOut(50),$(".reloadDiv").fadeIn(50),$(".BusinessTravel_timeBox").fadeOut(50),$(".trip-staff-times").fadeIn(50),$(".trip-distance").fadeIn(50),$(".trip-cost").fadeOut(50),$(".trip-people").fadeOut(50),switchDate(),showStaffTripTimes(),showDistanceStatistics()}),$(".changeBox .BusinessTravel").on("click",function(){cruurntCardIndex=3,$(".changeBox").css("background-image","url(image/bg44.png)"),$(".bodyContent").css("height","1120px");var e=$(".bodyContent").height()+190;$("body.nav-body").css("height",e+"px"),$("#engineer-schedule-container").hide(),$(".mapBox").fadeOut(50),$(".trip-city").fadeOut(50),$(".trip-cost-calc").fadeOut(50),$(".reloadDiv").fadeOut(50),$(".BusinessTravel_timeBox").fadeIn(50),$(".trip-staff-times").fadeOut(50),$(".trip-distance").fadeOut(50),$(".trip-cost").fadeIn(50),$(".trip-people").fadeIn(50);var t=$("span.BusinessTravel").attr("fontData");if(null==t)var n={Type:"year",Year:"all"};else n=JSON.parse(t);showBusinessTravel(n)}),$(".tongji_btn").click(function(){switchDate(),2==cruurntCardIndex?(showRangeTimeMap(),showTripCity(),showExpenseStatistics()):3==cruurntCardIndex&&(showStaffTripTimes(),showDistanceStatistics())}),$(document).on("change",".trip-city-tit-right .staffName",function(){switchDate(),showTripCity()});for(var engineerOb=$("span.engineer").html().split(","),len=engineerOb.length,str2="",str3="",i=1;i<len-1;i++)str2+='<option value="'+engineerOb[i].substring(12,engineerOb[i].length-1)+'">'+engineerOb[i].substring(12,engineerOb[i].length-1)+"</option>";var Str=str2+(str3+='<option value="'+engineerOb[len-1].substring(12,engineerOb[len-1].length-2)+'">'+engineerOb[len-1].substring(12,engineerOb[len-1].length-2)+"</option>");function FistPage(e){window.location.href=e+"1"}function UpPage(e){window.location.href=e}function NextPage(e){window.location.href=e}function PageJump(e){var t=document.getElementById("jumpNumber").value;null==t||0==t?t=$("#currentPage").html():t>parseInt($("#allPage").html())&&(t=$("#allPage").html()),window.location.href=e+t}function LastPage(e){var t=parseInt($("#allPage").html());window.location.href=e+t}function AjaxCostAndPeople(d){$.ajax({type:"get",url:"ScheduleStatistics",data:d,dataType:"JSON",success:function(e){if(0!=(l=e.number).length){var t=JSON.stringify(d);$("span.BusinessTravel").attr("fontData",t);for(var n=e.group,a=0;a<n.length;a++)console.log(n[a]),4==n[a].length?n[a]=n[a]+"年":6==n[a].length?n[a]=n[a].slice(0,4)+"/"+n[a].slice(4):8==n[a].length&&(n[a]=n[a].slice(4,6)+"/"+n[a].slice(6));var i=e.expense;$(".trip-cost-body").html("");var s='<div class="staff"></div>'+'<div id="main6" style="height:460px;width:100%;margin-top:0px;margin-left:0px"></div>';$(".trip-cost-body").append(s);var o=document.getElementById("main6"),r=echarts.init(o);option=null,option={color:["#3398DB"],title:{text:"",subtext:"",left:"left",textStyle:{fontSize:16,fontFamily:"微软雅黑",fontWeight:"normal",color:"#00aeef"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",name:"时间",data:n,splitLine:{show:!1},axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:0,textStyle:{color:"#333",fontFamily:"微软雅黑"}}}],yAxis:[{type:"value",name:"费用(元)",position:"center",axisLabel:{textStyle:{color:"#333",fontFamily:"微软雅黑"}}}],toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{magicType:{type:"",show:!0},dataView:{readOnly:!1},restore:{},saveAsImage:{}}},series:[{name:"费用(元)",type:"line",barWidth:"75%",label:{normal:{show:!0,position:"top"}},itemStyle:{normal:{label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:12},formatter:function(e){return 0==e.value?"":e.value}}}},data:i}]},n.length<=15?option.xAxis[0].axisLabel.interval="0":n.length<=32?option.xAxis[0].axisLabel.interval="1":n.length<=60?option.xAxis[0].axisLabel.interval="3":n.length<=90?option.xAxis[0].axisLabel.interval="6":n.length<=120?option.xAxis[0].axisLabel.interval="10":n.length<=150?option.xAxis[0].axisLabel.interval="15":n.length<=200?option.xAxis[0].axisLabel.interval="20":option.xAxis[0].axisLabel.interval="30",option&&"object"==typeof option&&r.setOption(option,!0);var l=e.number;$(".trip-people-body").html("");s='<div class="staff"></div>'+'<div id="main7" style="height:460px;width:100%;margin-top:0px;margin-left:0px"></div>';$(".trip-people-body").append(s);var u=document.getElementById("main7");r=echarts.init(u);option=null,option={color:["#3398DB"],title:{text:"",subtext:"",left:"left",textStyle:{fontSize:16,fontFamily:"微软雅黑",fontWeight:"normal",color:"#00aeef"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},axisLabel:{interval:0,rotate:0},xAxis:[{type:"category",name:"时间",data:n,splitLine:{show:!1},axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:0,textStyle:{color:"#333",fontFamily:"微软雅黑"}}}],yAxis:[{type:"value",name:"人数(人)",position:"center",axisLabel:{textStyle:{color:"#333",fontFamily:"微软雅黑"}}}],toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{magicType:{type:"",show:!0},dataView:{readOnly:!1},restore:{},saveAsImage:{}}},series:[{name:"人数",type:"line",barWidth:"75%",label:{normal:{show:!0,position:"top"}},itemStyle:{normal:{label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:12},formatter:function(e){return 0==e.value?"":e.value}}}},data:l}]},n.length<=15?option.xAxis[0].axisLabel.interval="0":n.length<=32?option.xAxis[0].axisLabel.interval="1":n.length<=60?option.xAxis[0].axisLabel.interval="3":n.length<=90?option.xAxis[0].axisLabel.interval="6":n.length<=120?option.xAxis[0].axisLabel.interval="10":n.length<=150?option.xAxis[0].axisLabel.interval="15":n.length<=200?option.xAxis[0].axisLabel.interval="20":option.xAxis[0].axisLabel.interval="30",option&&"object"==typeof option&&r.setOption(option,!0),option&&"object"==typeof option&&r.setOption(option,!0)}else $.MsgBox.Alert("提示","该时间段内暂无出差记录！")},error:function(){$.MsgBox_Unload.Alert("提示","网络错误请稍候重试！")}})}function showBusinessTravel(e){AjaxCostAndPeople(e)}$("select[name='staffName_sel']").append(Str),["请选择","飞机","铁路","自驾","打车","其他"].map(function(e,t,n){$("select[name='TransportTool_sel']").append("<option value='"+e+"'>"+e+"</option>")}),_.range(0,1050,50).map(function(e,t,n){0==t&&$("select[name='HotelExpense_sel']").append("<option value='请选择住宿费用'>请选择住宿费用</option>"),$("select[name='HotelExpense_sel']").append("<option value='"+e+"'>"+e+"元</option>")}),Array.prototype.unique=function(){for(var e=[],t={},n=0;n<this.length;n++)t[this[n]]||(e.push(this[n]),t[this[n]]=1);return e},$(function(){$(window).scrollTop(0);var t=$("#main-box").offset().top,n=$("#main-box").offset().left-1;$(window).scroll(function(){var e=$(window).scrollTop();t<=e?$(".left-fixed-div").css({position:"fixed",left:n+"px",top:"0"}):$(".left-fixed-div").css({position:"static"})}),$(".cover-all").fadeOut(30),$(".cover-all-img").fadeOut(30),$("input[name='date_sel'][value='dateRange']").prop("checked","checked")}),$(function(){for(var e=(new Date).getFullYear()-2017,t="<option>2017~至今</option>",n=0;n<=e;n++)t+="<option>"+(2017+n)+"</option>";$(".yearBox").append(t)}),jeDate("#ranges02",{multiPane:!1,range:" ~ ",minDate:"2017-10-01 10:20:25",maxDate:"2100-10-01 18:30:35",format:"YYYY-MM-DD"}),$(document).on("change",'.BusinessTravel_timeBox input[name ="inlineRadioOptions"]',function(){"option1"==this.value?($(".yearBox").fadeIn(50),$(".monthBox").fadeOut(50),$(".dayBox").fadeOut(50)):"option2"==this.value?($(".yearBox").fadeOut(50),$(".monthBox").fadeIn(50),$(".dayBox").fadeOut(50)):"option3"==this.value&&($(".dayBox").fadeIn(50),$(".yearBox").fadeOut(50),$(".monthBox").fadeOut(50))}),$(".monthTitle span.pre_year").click(function(){var e=$(".this_year").html();0<e.indexOf("年")&&(e=e.slice(0,4)),e--,$(".this_year").html("").html(e)}),$(".monthTitle span.next_year").click(function(){var e=$(".this_year").html();0<e.indexOf("年")&&(e=e.slice(0,4)),e++,$(".this_year").html("").html(e)}),$(".monthBox .monthTitle").click(function(e){e.stopPropagation(),$(".monthBox .monthContent").fadeIn(50),$(".pre_year").css({visibility:"visible"}),$(".next_year").css({visibility:"visible"})}),$(".monthBox .monthContent li span").click(function(e){e.stopPropagation(),$(".monthBox .monthContent").fadeOut(50),$(".pre_year").css({visibility:"hidden"}),$(".next_year").css({visibility:"hidden"});var t=$(this).text(),n=$(".this_year").html();0<n.indexOf("年")&&(n=n.slice(0,4)),$(".this_year").html("").html(n+"年"+t)}),$("body").click(function(e){$(e.target).is(".monthBox .monthTitle")||$(".monthBox .monthContent").fadeOut(50)}),$(".BusinessTravel_btn").click(function(){var e=$(".BusinessTravel_timeBox input[name = inlineRadioOptions]:checked").attr("searchType"),t=new Object;if("year"==e)t=4==(a=$(".yearBox option:selected").text()).length?{Type:"year",Year:a}:{Type:"year",Year:"all"};else if("month"==e){if((a=$(".monthBox .monthTitle .this_year").text()).indexOf("年")<0)return a=(new Date).getFullYear()+"-"+((new Date).getMonth()+1),void $.MsgBox_Unload.Alert("提示","请至少选择一个月份~");var n=a.replace(/年/,"-");t={Type:"month",Month:n=n.slice(0,n.length-1)}}else if("day"==e){var a;if(""==(a=$("#ranges02").val()))return void $.MsgBox_Unload.Alert("提示","请选择您想要查看的时间段~");Start=a.slice(0,10),End=a.slice(12),t={Type:"day",Start:Start,End:End}}showBusinessTravel(t)});